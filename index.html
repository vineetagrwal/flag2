<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete World Flag Quiz</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .quiz-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 700px;
            width: 100%;
            text-align: center;
        }

        .quiz-title {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .progress-info {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .global-progress {
            font-size: 1.1em;
            color: #333;
            margin-bottom: 10px;
        }

        .quiz-number {
            font-size: 1em;
            color: #666;
            margin-bottom: 15px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            transition: width 0.3s ease;
            width: 0%;
        }

        .mode-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .mode-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .mode-btn.active {
            background: #667eea;
            color: white;
        }

        .score {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 20px;
        }

        .flag-emoji {
            font-size: 8em;
            line-height: 1;
            margin: 20px 0;
            display: block;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .country-info {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            display: none;
        }

        .country-info.show {
            display: block;
        }

        .info-item {
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .info-label {
            font-weight: 600;
            color: #667eea;
        }

        .question {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 25px;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
            font-weight: 500;
        }

        .option:hover {
            background: #e9ecef;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .option.correct {
            background: #28a745;
            border-color: #28a745;
            color: white;
        }

        .option.incorrect {
            background: #dc3545;
            border-color: #dc3545;
            color: white;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .feedback {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            font-weight: 600;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
        }

        .completion-banner {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: none;
        }

        .completion-banner.show {
            display: block;
        }

        @media (max-width: 600px) {
            .quiz-container {
                padding: 20px;
            }

            .quiz-title {
                font-size: 2em;
            }

            .options {
                grid-template-columns: 1fr;
            }

            .flag-emoji {
                font-size: 6em;
            }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1 class="quiz-title">ğŸŒ Complete World Flag Quiz</h1>

        <div class="progress-info">
            <div class="global-progress" id="global-progress">Countries Learned: 0 / 195</div>
            <div class="quiz-number" id="quiz-number">Ready to start Quiz #1</div>
            <div class="progress-bar">
                <div class="progress-fill" id="global-progress-fill"></div>
            </div>
        </div>

        <div class="completion-banner" id="completion-banner">
            <h2>ğŸ‰ Congratulations! ğŸ‰</h2>
            <p>You've mastered all 195 countries of the world!</p>
        </div>

        <div class="mode-buttons">
            <button class="mode-btn active" data-mode="country">Country Name</button>
            <button class="mode-btn" data-mode="capital">Capital City</button>
            <button class="mode-btn" data-mode="continent">Continent</button>
        </div>

        <div class="score">Current Quiz Score: <span id="current-score">0</span> / <span id="total-questions">10</span></div>

        <div class="flag-emoji" id="flag-emoji">ğŸ</div>

        <div class="country-info" id="country-info">
            <div class="info-item">
                <span class="info-label">Country:</span> <span id="country-name">-</span>
            </div>
            <div class="info-item">
                <span class="info-label">Capital:</span> <span id="capital-name">-</span>
            </div>
            <div class="info-item">
                <span class="info-label">Continent:</span> <span id="continent-name">-</span>
            </div>
            <div class="info-item">
                <span class="info-label">Population:</span> <span id="population">-</span>
            </div>
        </div>

        <div class="question" id="question">Click "Start Quiz" to begin learning about world countries!</div>

        <div class="options" id="options" style="display: none;">
            <div class="option" data-option="0"></div>
            <div class="option" data-option="1"></div>
            <div class="option" data-option="2"></div>
            <div class="option" data-option="3"></div>
        </div>

        <div class="feedback" id="feedback" style="display: none;"></div>

        <div class="controls">
            <button class="btn btn-primary" id="start-btn">Start Quiz #1</button>
            <button class="btn btn-primary" id="next-btn" style="display: none;">Next Question</button>
            <button class="btn btn-primary" id="next-quiz-btn" style="display: none;">Start Next Quiz</button>
            <button class="btn btn-secondary" id="reset-btn" style="display: none;">Reset Progress</button>
        </div>
    </div>

    <!-- Your script remains unchanged -->


    <script>
        console.log('Script loading...');
        
        // All 195 countries complete list
        const allCountries = [
            // Africa (54)
            {name: "Algeria", capital: "Algiers", continent: "Africa", flag: "ğŸ‡©ğŸ‡¿", population: "44M"},
            {name: "Angola", capital: "Luanda", continent: "Africa", flag: "ğŸ‡¦ğŸ‡´", population: "33M"},
            {name: "Benin", capital: "Porto-Novo", continent: "Africa", flag: "ğŸ‡§ğŸ‡¯", population: "12M"},
            {name: "Botswana", capital: "Gaborone", continent: "Africa", flag: "ğŸ‡§ğŸ‡¼", population: "2.4M"},
            {name: "Burkina Faso", capital: "Ouagadougou", continent: "Africa", flag: "ğŸ‡§ğŸ‡«", population: "22M"},
            {name: "Burundi", capital: "Gitega", continent: "Africa", flag: "ğŸ‡§ğŸ‡®", population: "12M"},
            {name: "Cabo Verde", capital: "Praia", continent: "Africa", flag: "ğŸ‡¨ğŸ‡»", population: "562K"},
            {name: "Cameroon", capital: "YaoundÃ©", continent: "Africa", flag: "ğŸ‡¨ğŸ‡²", population: "27M"},
            {name: "Central African Republic", capital: "Bangui", continent: "Africa", flag: "ğŸ‡¨ğŸ‡«", population: "5M"},
            {name: "Chad", capital: "N'Djamena", continent: "Africa", flag: "ğŸ‡¹ğŸ‡©", population: "17M"},
            {name: "Comoros", capital: "Moroni", continent: "Africa", flag: "ğŸ‡°ğŸ‡²", population: "873K"},
            {name: "Congo", capital: "Brazzaville", continent: "Africa", flag: "ğŸ‡¨ğŸ‡¬", population: "5.5M"},
            {name: "Democratic Republic of Congo", capital: "Kinshasa", continent: "Africa", flag: "ğŸ‡¨ğŸ‡©", population: "95M"},
            {name: "Djibouti", capital: "Djibouti", continent: "Africa", flag: "ğŸ‡©ğŸ‡¯", population: "998K"},
            {name: "Egypt", capital: "Cairo", continent: "Africa", flag: "ğŸ‡ªğŸ‡¬", population: "104M"},
            {name: "Equatorial Guinea", capital: "Malabo", continent: "Africa", flag: "ğŸ‡¬ğŸ‡¶", population: "1.4M"},
            {name: "Eritrea", capital: "Asmara", continent: "Africa", flag: "ğŸ‡ªğŸ‡·", population: "3.6M"},
            {name: "Eswatini", capital: "Mbabane", continent: "Africa", flag: "ğŸ‡¸ğŸ‡¿", population: "1.2M"},
            {name: "Ethiopia", capital: "Addis Ababa", continent: "Africa", flag: "ğŸ‡ªğŸ‡¹", population: "118M"},
            {name: "Gabon", capital: "Libreville", continent: "Africa", flag: "ğŸ‡¬ğŸ‡¦", population: "2.3M"},
            {name: "Gambia", capital: "Banjul", continent: "Africa", flag: "ğŸ‡¬ğŸ‡²", population: "2.4M"},
            {name: "Ghana", capital: "Accra", continent: "Africa", flag: "ğŸ‡¬ğŸ‡­", population: "32M"},
            {name: "Guinea", capital: "Conakry", continent: "Africa", flag: "ğŸ‡¬ğŸ‡³", population: "13M"},
            {name: "Guinea-Bissau", capital: "Bissau", continent: "Africa", flag: "ğŸ‡¬ğŸ‡¼", population: "2M"},
            {name: "Ivory Coast", capital: "Yamoussoukro", continent: "Africa", flag: "ğŸ‡¨ğŸ‡®", population: "27M"},
            {name: "Kenya", capital: "Nairobi", continent: "Africa", flag: "ğŸ‡°ğŸ‡ª", population: "54M"},
            {name: "Lesotho", capital: "Maseru", continent: "Africa", flag: "ğŸ‡±ğŸ‡¸", population: "2.1M"},
            {name: "Liberia", capital: "Monrovia", continent: "Africa", flag: "ğŸ‡±ğŸ‡·", population: "5.1M"},
            {name: "Libya", capital: "Tripoli", continent: "Africa", flag: "ğŸ‡±ğŸ‡¾", population: "7M"},
            {name: "Madagascar", capital: "Antananarivo", continent: "Africa", flag: "ğŸ‡²ğŸ‡¬", population: "28M"},
            {name: "Malawi", capital: "Lilongwe", continent: "Africa", flag: "ğŸ‡²ğŸ‡¼", population: "20M"},
            {name: "Mali", capital: "Bamako", continent: "Africa", flag: "ğŸ‡²ğŸ‡±", population: "21M"},
            {name: "Mauritania", capital: "Nouakchott", continent: "Africa", flag: "ğŸ‡²ğŸ‡·", population: "4.6M"},
            {name: "Mauritius", capital: "Port Louis", continent: "Africa", flag: "ğŸ‡²ğŸ‡º", population: "1.3M"},
            {name: "Morocco", capital: "Rabat", continent: "Africa", flag: "ğŸ‡²ğŸ‡¦", population: "37M"},
            {name: "Mozambique", capital: "Maputo", continent: "Africa", flag: "ğŸ‡²ğŸ‡¿", population: "32M"},
            {name: "Namibia", capital: "Windhoek", continent: "Africa", flag: "ğŸ‡³ğŸ‡¦", population: "2.5M"},
            {name: "Niger", capital: "Niamey", continent: "Africa", flag: "ğŸ‡³ğŸ‡ª", population: "25M"},
            {name: "Nigeria", capital: "Abuja", continent: "Africa", flag: "ğŸ‡³ğŸ‡¬", population: "218M"},
            {name: "Rwanda", capital: "Kigali", continent: "Africa", flag: "ğŸ‡·ğŸ‡¼", population: "13M"},
            {name: "Sao Tome and Principe", capital: "Sao Tome", continent: "Africa", flag: "ğŸ‡¸ğŸ‡¹", population: "219K"},
            {name: "Senegal", capital: "Dakar", continent: "Africa", flag: "ğŸ‡¸ğŸ‡³", population: "17M"},
            {name: "Seychelles", capital: "Victoria", continent: "Africa", flag: "ğŸ‡¸ğŸ‡¨", population: "98K"},
            {name: "Sierra Leone", capital: "Freetown", continent: "Africa", flag: "ğŸ‡¸ğŸ‡±", population: "8M"},
            {name: "Somalia", capital: "Mogadishu", continent: "Africa", flag: "ğŸ‡¸ğŸ‡´", population: "16M"},
            {name: "South Africa", capital: "Cape Town", continent: "Africa", flag: "ğŸ‡¿ğŸ‡¦", population: "60M"},
            {name: "South Sudan", capital: "Juba", continent: "Africa", flag: "ğŸ‡¸ğŸ‡¸", population: "11M"},
            {name: "Sudan", capital: "Khartoum", continent: "Africa", flag: "ğŸ‡¸ğŸ‡©", population: "45M"},
            {name: "Tanzania", capital: "Dodoma", continent: "Africa", flag: "ğŸ‡¹ğŸ‡¿", population: "61M"},
            {name: "Togo", capital: "Lome", continent: "Africa", flag: "ğŸ‡¹ğŸ‡¬", population: "8M"},
            {name: "Tunisia", capital: "Tunis", continent: "Africa", flag: "ğŸ‡¹ğŸ‡³", population: "12M"},
            {name: "Uganda", capital: "Kampala", continent: "Africa", flag: "ğŸ‡ºğŸ‡¬", population: "47M"},
            {name: "Zambia", capital: "Lusaka", continent: "Africa", flag: "ğŸ‡¿ğŸ‡²", population: "19M"},
            {name: "Zimbabwe", capital: "Harare", continent: "Africa", flag: "ğŸ‡¿ğŸ‡¼", population: "15M"},

            // Asia (48)
            {name: "Afghanistan", capital: "Kabul", continent: "Asia", flag: "ğŸ‡¦ğŸ‡«", population: "38M"},
            {name: "Armenia", capital: "Yerevan", continent: "Asia", flag: "ğŸ‡¦ğŸ‡²", population: "3M"},
            {name: "Azerbaijan", capital: "Baku", continent: "Asia", flag: "ğŸ‡¦ğŸ‡¿", population: "10M"},
            {name: "Bahrain", capital: "Manama", continent: "Asia", flag: "ğŸ‡§ğŸ‡­", population: "1.7M"},
            {name: "Bangladesh", capital: "Dhaka", continent: "Asia", flag: "ğŸ‡§ğŸ‡©", population: "166M"},
            {name: "Bhutan", capital: "Thimphu", continent: "Asia", flag: "ğŸ‡§ğŸ‡¹", population: "772K"},
            {name: "Brunei", capital: "Bandar Seri Begawan", continent: "Asia", flag: "ğŸ‡§ğŸ‡³", population: "441K"},
            {name: "Cambodia", capital: "Phnom Penh", continent: "Asia", flag: "ğŸ‡°ğŸ‡­", population: "17M"},
            {name: "China", capital: "Beijing", continent: "Asia", flag: "ğŸ‡¨ğŸ‡³", population: "1.4B"},
            {name: "Cyprus", capital: "Nicosia", continent: "Asia", flag: "ğŸ‡¨ğŸ‡¾", population: "1.2M"},
            {name: "East Timor", capital: "Dili", continent: "Asia", flag: "ğŸ‡¹ğŸ‡±", population: "1.3M"},
            {name: "Georgia", capital: "Tbilisi", continent: "Asia", flag: "ğŸ‡¬ğŸ‡ª", population: "3.7M"},
            {name: "India", capital: "New Delhi", continent: "Asia", flag: "ğŸ‡®ğŸ‡³", population: "1.4B"},
            {name: "Indonesia", capital: "Jakarta", continent: "Asia", flag: "ğŸ‡®ğŸ‡©", population: "274M"},
            {name: "Iran", capital: "Tehran", continent: "Asia", flag: "ğŸ‡®ğŸ‡·", population: "85M"},
            {name: "Iraq", capital: "Baghdad", continent: "Asia", flag: "ğŸ‡®ğŸ‡¶", population: "41M"},
            {name: "Israel", capital: "Jerusalem", continent: "Asia", flag: "ğŸ‡®ğŸ‡±", population: "9.4M"},
            {name: "Japan", capital: "Tokyo", continent: "Asia", flag: "ğŸ‡¯ğŸ‡µ", population: "125M"},
            {name: "Jordan", capital: "Amman", continent: "Asia", flag: "ğŸ‡¯ğŸ‡´", population: "10M"},
            {name: "Kazakhstan", capital: "Nur-Sultan", continent: "Asia", flag: "ğŸ‡°ğŸ‡¿", population: "19M"},
            {name: "Kuwait", capital: "Kuwait City", continent: "Asia", flag: "ğŸ‡°ğŸ‡¼", population: "4.3M"},
            {name: "Kyrgyzstan", capital: "Bishkek", continent: "Asia", flag: "ğŸ‡°ğŸ‡¬", population: "6.6M"},
            {name: "Laos", capital: "Vientiane", continent: "Asia", flag: "ğŸ‡±ğŸ‡¦", population: "7.3M"},
            {name: "Lebanon", capital: "Beirut", continent: "Asia", flag: "ğŸ‡±ğŸ‡§", population: "6.8M"},
            {name: "Malaysia", capital: "Kuala Lumpur", continent: "Asia", flag: "ğŸ‡²ğŸ‡¾", population: "33M"},
            {name: "Maldives", capital: "Male", continent: "Asia", flag: "ğŸ‡²ğŸ‡»", population: "541K"},
            {name: "Mongolia", capital: "Ulaanbaatar", continent: "Asia", flag: "ğŸ‡²ğŸ‡³", population: "3.3M"},
            {name: "Myanmar", capital: "Naypyidaw", continent: "Asia", flag: "ğŸ‡²ğŸ‡²", population: "54M"},
            {name: "Nepal", capital: "Kathmandu", continent: "Asia", flag: "ğŸ‡³ğŸ‡µ", population: "30M"},
            {name: "North Korea", capital: "Pyongyang", continent: "Asia", flag: "ğŸ‡°ğŸ‡µ", population: "26M"},
            {name: "Oman", capital: "Muscat", continent: "Asia", flag: "ğŸ‡´ğŸ‡²", population: "5.1M"},
            {name: "Pakistan", capital: "Islamabad", continent: "Asia", flag: "ğŸ‡µğŸ‡°", population: "225M"},
            {name: "Palestine", capital: "Ramallah", continent: "Asia", flag: "ğŸ‡µğŸ‡¸", population: "5M"},
            {name: "Philippines", capital: "Manila", continent: "Asia", flag: "ğŸ‡µğŸ‡­", population: "110M"},
            {name: "Qatar", capital: "Doha", continent: "Asia", flag: "ğŸ‡¶ğŸ‡¦", population: "2.9M"},
            {name: "Russia", capital: "Moscow", continent: "Asia/Europe", flag: "ğŸ‡·ğŸ‡º", population: "146M"},
            {name: "Saudi Arabia", capital: "Riyadh", continent: "Asia", flag: "ğŸ‡¸ğŸ‡¦", population: "35M"},
            {name: "Singapore", capital: "Singapore", continent: "Asia", flag: "ğŸ‡¸ğŸ‡¬", population: "5.9M"},
            {name: "South Korea", capital: "Seoul", continent: "Asia", flag: "ğŸ‡°ğŸ‡·", population: "52M"},
            {name: "Sri Lanka", capital: "Colombo", continent: "Asia", flag: "ğŸ‡±ğŸ‡°", population: "22M"},
            {name: "Syria", capital: "Damascus", continent: "Asia", flag: "ğŸ‡¸ğŸ‡¾", population: "18M"},
            {name: "Tajikistan", capital: "Dushanbe", continent: "Asia", flag: "ğŸ‡¹ğŸ‡¯", population: "9.5M"},
            {name: "Thailand", capital: "Bangkok", continent: "Asia", flag: "ğŸ‡¹ğŸ‡­", population: "70M"},
            {name: "Turkey", capital: "Ankara", continent: "Asia/Europe", flag: "ğŸ‡¹ğŸ‡·", population: "85M"},
            {name: "Turkmenistan", capital: "Ashgabat", continent: "Asia", flag: "ğŸ‡¹ğŸ‡²", population: "6M"},
            {name: "United Arab Emirates", capital: "Abu Dhabi", continent: "Asia", flag: "ğŸ‡¦ğŸ‡ª", population: "10M"},
            {name: "Uzbekistan", capital: "Tashkent", continent: "Asia", flag: "ğŸ‡ºğŸ‡¿", population: "34M"},
            {name: "Vietnam", capital: "Hanoi", continent: "Asia", flag: "ğŸ‡»ğŸ‡³", population: "98M"},
            {name: "Yemen", capital: "Sanaa", continent: "Asia", flag: "ğŸ‡¾ğŸ‡ª", population: "30M"},

            // Europe (44)
            {name: "Albania", capital: "Tirana", continent: "Europe", flag: "ğŸ‡¦ğŸ‡±", population: "2.9M"},
            {name: "Andorra", capital: "Andorra la Vella", continent: "Europe", flag: "ğŸ‡¦ğŸ‡©", population: "79K"},
            {name: "Austria", capital: "Vienna", continent: "Europe", flag: "ğŸ‡¦ğŸ‡¹", population: "9M"},
            {name: "Belarus", capital: "Minsk", continent: "Europe", flag: "ğŸ‡§ğŸ‡¾", population: "9.4M"},
            {name: "Belgium", capital: "Brussels", continent: "Europe", flag: "ğŸ‡§ğŸ‡ª", population: "11.5M"},
            {name: "Bosnia and Herzegovina", capital: "Sarajevo", continent: "Europe", flag: "ğŸ‡§ğŸ‡¦", population: "3.3M"},
            {name: "Bulgaria", capital: "Sofia", continent: "Europe", flag: "ğŸ‡§ğŸ‡¬", population: "7M"},
            {name: "Croatia", capital: "Zagreb", continent: "Europe", flag: "ğŸ‡­ğŸ‡·", population: "3.9M"},
            {name: "Czech Republic", capital: "Prague", continent: "Europe", flag: "ğŸ‡¨ğŸ‡¿", population: "10.7M"},
            {name: "Denmark", capital: "Copenhagen", continent: "Europe", flag: "ğŸ‡©ğŸ‡°", population: "5.8M"},
            {name: "Estonia", capital: "Tallinn", continent: "Europe", flag: "ğŸ‡ªğŸ‡ª", population: "1.3M"},
            {name: "Finland", capital: "Helsinki", continent: "Europe", flag: "ğŸ‡«ğŸ‡®", population: "5.5M"},
            {name: "France", capital: "Paris", continent: "Europe", flag: "ğŸ‡«ğŸ‡·", population: "68M"},
            {name: "Germany", capital: "Berlin", continent: "Europe", flag: "ğŸ‡©ğŸ‡ª", population: "83M"},
            {name: "Greece", capital: "Athens", continent: "Europe", flag: "ğŸ‡¬ğŸ‡·", population: "10.7M"},
            {name: "Hungary", capital: "Budapest", continent: "Europe", flag: "ğŸ‡­ğŸ‡º", population: "9.7M"},
            {name: "Iceland", capital: "Reykjavik", continent: "Europe", flag: "ğŸ‡®ğŸ‡¸", population: "372K"},
            {name: "Ireland", capital: "Dublin", continent: "Europe", flag: "ğŸ‡®ğŸ‡ª", population: "5M"},
            {name: "Italy", capital: "Rome", continent: "Europe", flag: "ğŸ‡®ğŸ‡¹", population: "59M"},
            {name: "Latvia", capital: "Riga", continent: "Europe", flag: "ğŸ‡±ğŸ‡»", population: "1.9M"},
            {name: "Liechtenstein", capital: "Vaduz", continent: "Europe", flag: "ğŸ‡±ğŸ‡®", population: "38K"},
            {name: "Lithuania", capital: "Vilnius", continent: "Europe", flag: "ğŸ‡±ğŸ‡¹", population: "2.8M"},
            {name: "Luxembourg", capital: "Luxembourg", continent: "Europe", flag: "ğŸ‡±ğŸ‡º", population: "634K"},
            {name: "Malta", capital: "Valletta", continent: "Europe", flag: "ğŸ‡²ğŸ‡¹", population: "518K"},
            {name: "Moldova", capital: "Chisinau", continent: "Europe", flag: "ğŸ‡²ğŸ‡©", population: "2.6M"},
            {name: "Monaco", capital: "Monaco", continent: "Europe", flag: "ğŸ‡²ğŸ‡¨", population: "39K"},
            {name: "Montenegro", capital: "Podgorica", continent: "Europe", flag: "ğŸ‡²ğŸ‡ª", population: "628K"},
            {name: "Netherlands", capital: "Amsterdam", continent: "Europe", flag: "ğŸ‡³ğŸ‡±", population: "17M"},
            {name: "North Macedonia", capital: "Skopje", continent: "Europe", flag: "ğŸ‡²ğŸ‡°", population: "2.1M"},
            {name: "Norway", capital: "Oslo", continent: "Europe", flag: "ğŸ‡³ğŸ‡´", population: "5.4M"},
            {name: "Poland", capital: "Warsaw", continent: "Europe", flag: "ğŸ‡µğŸ‡±", population: "38M"},
            {name: "Portugal", capital: "Lisbon", continent: "Europe", flag: "ğŸ‡µğŸ‡¹", population: "10M"},
            {name: "Romania", capital: "Bucharest", continent: "Europe", flag: "ğŸ‡·ğŸ‡´", population: "19M"},
            {name: "San Marino", capital: "San Marino", continent: "Europe", flag: "ğŸ‡¸ğŸ‡²", population: "34K"},
            {name: "Serbia", capital: "Belgrade", continent: "Europe", flag: "ğŸ‡·ğŸ‡¸", population: "7M"},
            {name: "Slovakia", capital: "Bratislava", continent: "Europe", flag: "ğŸ‡¸ğŸ‡°", population: "5.5M"},
            {name: "Slovenia", capital: "Ljubljana", continent: "Europe", flag: "ğŸ‡¸ğŸ‡®", population: "2.1M"},
            {name: "Spain", capital: "Madrid", continent: "Europe", flag: "ğŸ‡ªğŸ‡¸", population: "47M"},
            {name: "Sweden", capital: "Stockholm", continent: "Europe", flag: "ğŸ‡¸ğŸ‡ª", population: "10M"},
            {name: "Switzerland", capital: "Bern", continent: "Europe", flag: "ğŸ‡¨ğŸ‡­", population: "8.7M"},
            {name: "Ukraine", capital: "Kyiv", continent: "Europe", flag: "ğŸ‡ºğŸ‡¦", population: "41M"},
            {name: "United Kingdom", capital: "London", continent: "Europe", flag: "ğŸ‡¬ğŸ‡§", population: "67M"},
            {name: "Vatican City", capital: "Vatican City", continent: "Europe", flag: "ğŸ‡»ğŸ‡¦", population: "825"},

            // North America (23)
            {name: "Antigua and Barbuda", capital: "Saint Johns", continent: "North America", flag: "ğŸ‡¦ğŸ‡¬", population: "98K"},
            {name: "Bahamas", capital: "Nassau", continent: "North America", flag: "ğŸ‡§ğŸ‡¸", population: "394K"},
            {name: "Barbados", capital: "Bridgetown", continent: "North America", flag: "ğŸ‡§ğŸ‡§", population: "288K"},
            {name: "Belize", capital: "Belmopan", continent: "North America", flag: "ğŸ‡§ğŸ‡¿", population: "398K"},
            {name: "Canada", capital: "Ottawa", continent: "North America", flag: "ğŸ‡¨ğŸ‡¦", population: "38M"},
            {name: "Costa Rica", capital: "San Jose", continent: "North America", flag: "ğŸ‡¨ğŸ‡·", population: "5.1M"},
            {name: "Cuba", capital: "Havana", continent: "North America", flag: "ğŸ‡¨ğŸ‡º", population: "11M"},
            {name: "Dominica", capital: "Roseau", continent: "North America", flag: "ğŸ‡©ğŸ‡²", population: "72K"},
            {name: "Dominican Republic", capital: "Santo Domingo", continent: "North America", flag: "ğŸ‡©ğŸ‡´", population: "11M"},
            {name: "El Salvador", capital: "San Salvador", continent: "North America", flag: "ğŸ‡¸ğŸ‡»", population: "6.5M"},
            {name: "Grenada", capital: "Saint Georges", continent: "North America", flag: "ğŸ‡¬ğŸ‡©", population: "113K"},
            {name: "Guatemala", capital: "Guatemala City", continent: "North America", flag: "ğŸ‡¬ğŸ‡¹", population: "17M"},
            {name: "Haiti", capital: "Port-au-Prince", continent: "North America", flag: "ğŸ‡­ğŸ‡¹", population: "11M"},
            {name: "Honduras", capital: "Tegucigalpa", continent: "North America", flag: "ğŸ‡­ğŸ‡³", population: "10M"},
            {name: "Jamaica", capital: "Kingston", continent: "North America", flag: "ğŸ‡¯ğŸ‡²", population: "2.9M"},
            {name: "Mexico", capital: "Mexico City", continent: "North America", flag: "ğŸ‡²ğŸ‡½", population: "129M"},
            {name: "Nicaragua", capital: "Managua", continent: "North America", flag: "ğŸ‡³ğŸ‡®", population: "6.6M"},
            {name: "Panama", capital: "Panama City", continent: "North America", flag: "ğŸ‡µğŸ‡¦", population: "4.3M"},
            {name: "Saint Kitts and Nevis", capital: "Basseterre", continent: "North America", flag: "ğŸ‡°ğŸ‡³", population: "53K"},
            {name: "Saint Lucia", capital: "Castries", continent: "North America", flag: "ğŸ‡±ğŸ‡¨", population: "184K"},
            {name: "Saint Vincent and the Grenadines", capital: "Kingstown", continent: "North America", flag: "ğŸ‡»ğŸ‡¨", population: "111K"},
            {name: "Trinidad and Tobago", capital: "Port of Spain", continent: "North America", flag: "ğŸ‡¹ğŸ‡¹", population: "1.4M"},
            {name: "United States", capital: "Washington D.C.", continent: "North America", flag: "ğŸ‡ºğŸ‡¸", population: "333M"},

            // Oceania (14)
            {name: "Australia", capital: "Canberra", continent: "Oceania", flag: "ğŸ‡¦ğŸ‡º", population: "26M"},
            {name: "Fiji", capital: "Suva", continent: "Oceania", flag: "ğŸ‡«ğŸ‡¯", population: "898K"},
            {name: "Kiribati", capital: "Tarawa", continent: "Oceania", flag: "ğŸ‡°ğŸ‡®", population: "121K"},
            {name: "Marshall Islands", capital: "Majuro", continent: "Oceania", flag: "ğŸ‡²ğŸ‡­", population: "59K"},
            {name: "Micronesia", capital: "Palikir", continent: "Oceania", flag: "ğŸ‡«ğŸ‡²", population: "115K"},
            {name: "Nauru", capital: "Yaren", continent: "Oceania", flag: "ğŸ‡³ğŸ‡·", population: "11K"},
            {name: "New Zealand", capital: "Wellington", continent: "Oceania", flag: "ğŸ‡³ğŸ‡¿", population: "5.1M"},
            {name: "Palau", capital: "Ngerulmud", continent: "Oceania", flag: "ğŸ‡µğŸ‡¼", population: "18K"},
            {name: "Papua New Guinea", capital: "Port Moresby", continent: "Oceania", flag: "ğŸ‡µğŸ‡¬", population: "9M"},
            {name: "Samoa", capital: "Apia", continent: "Oceania", flag: "ğŸ‡¼ğŸ‡¸", population: "199K"},
            {name: "Solomon Islands", capital: "Honiara", continent: "Oceania", flag: "ğŸ‡¸ğŸ‡§", population: "687K"},
            {name: "Tonga", capital: "Nukualofa", continent: "Oceania", flag: "ğŸ‡¹ğŸ‡´", population: "106K"},
            {name: "Tuvalu", capital: "Funafuti", continent: "Oceania", flag: "ğŸ‡¹ğŸ‡»", population: "12K"},
            {name: "Vanuatu", capital: "Port Vila", continent: "Oceania", flag: "ğŸ‡»ğŸ‡º", population: "307K"},

            // South America (12)
            {name: "Argentina", capital: "Buenos Aires", continent: "South America", flag: "ğŸ‡¦ğŸ‡·", population: "45M"},
            {name: "Bolivia", capital: "Sucre", continent: "South America", flag: "ğŸ‡§ğŸ‡´", population: "12M"},
            {name: "Brazil", capital: "Brasilia", continent: "South America", flag: "ğŸ‡§ğŸ‡·", population: "215M"},
            {name: "Chile", capital: "Santiago", continent: "South America", flag: "ğŸ‡¨ğŸ‡±", population: "19M"},
            {name: "Colombia", capital: "Bogota", continent: "South America", flag: "ğŸ‡¨ğŸ‡´", population: "51M"},
            {name: "Ecuador", capital: "Quito", continent: "South America", flag: "ğŸ‡ªğŸ‡¨", population: "18M"},
            {name: "Guyana", capital: "Georgetown", continent: "South America", flag: "ğŸ‡¬ğŸ‡¾", population: "787K"},
            {name: "Paraguay", capital: "Asuncion", continent: "South America", flag: "ğŸ‡µğŸ‡¾", population: "7.1M"},
            {name: "Peru", capital: "Lima", continent: "South America", flag: "ğŸ‡µğŸ‡ª", population: "33M"},
            {name: "Suriname", capital: "Paramaribo", continent: "South America", flag: "ğŸ‡¸ğŸ‡·", population: "587K"},
            {name: "Uruguay", capital: "Montevideo", continent: "South America", flag: "ğŸ‡ºğŸ‡¾", population: "3.5M"},
            {name: "Venezuela", capital: "Caracas", continent: "South America", flag: "ğŸ‡»ğŸ‡ª", population: "28M"}
        ];

        console.log('Countries loaded:', allCountries.length);

        // Global progress tracking
        let globalProgress = {
            learnedCountries: [],
            currentQuiz: 1
        };

        // Load saved progress with better error handling
        function loadProgress() {
            try {
                const saved = localStorage.getItem('flagQuizProgress');
                if (saved) {
                    globalProgress = JSON.parse(saved);
                    console.log('Progress loaded:', globalProgress);
                }
            } catch (e) {
                console.log('localStorage not available, using session storage');
            }
        }

        let currentQuestionIndex = 0;
        let score = 0;
        let currentCountry = null;
        let selectedAnswer = null;
        let quizMode = 'country';
        let currentQuizCountries = [];

        // Wait for DOM to be ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing...');
            
            const elements = {
                flagEmoji: document.getElementById('flag-emoji'),
                countryInfo: document.getElementById('country-info'),
                countryName: document.getElementById('country-name'),
                capitalName: document.getElementById('capital-name'),
                continentName: document.getElementById('continent-name'),
                population: document.getElementById('population'),
                question: document.getElementById('question'),
                options: document.getElementById('options'),
                feedback: document.getElementById('feedback'),
                startBtn: document.getElementById('start-btn'),
                nextBtn: document.getElementById('next-btn'),
                nextQuizBtn: document.getElementById('next-quiz-btn'),
                resetBtn: document.getElementById('reset-btn'),
                currentScore: document.getElementById('current-score'),
                totalQuestions: document.getElementById('total-questions'),
                globalProgress: document.getElementById('global-progress'),
                quizNumber: document.getElementById('quiz-number'),
                globalProgressFill: document.getElementById('global-progress-fill'),
                completionBanner: document.getElementById('completion-banner')
            };

            // Check if all elements are found
            for (let key in elements) {
                if (!elements[key]) {
                    console.error('Element not found:', key);
                }
            }

            function saveProgress() {
                try {
                    localStorage.setItem('flagQuizProgress', JSON.stringify(globalProgress));
                    console.log('Progress saved');
                } catch (e) {
                    console.log('Could not save to localStorage<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete World Flag Quiz</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .quiz-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 700px;
            width: 100%;
            text-align: center;
        }

        .quiz-title {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .progress-info {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .global-progress {
            font-size: 1.1em;
            color: #333;
            margin-bottom: 10px;
        }

        .quiz-number {
            font-size: 1em;
            color: #666;
            margin-bottom: 15px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            transition: width 0.3s ease;
            width: 0%;
        }

        .mode-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .mode-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .mode-btn.active {
            background: #667eea;
            color: white;
        }

        .score {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 20px;
        }

        .flag-emoji {
            font-size: 8em;
            line-height: 1;
            margin: 20px 0;
            display: block;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .country-info {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            display: none;
        }

        .country-info.show {
            display: block;
        }

        .info-item {
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .info-label {
            font-weight: 600;
            color: #667eea;
        }

        .question {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 25px;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
            font-weight: 500;
        }

        .option:hover {
            background: #e9ecef;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .option.correct {
            background: #28a745;
            border-color: #28a745;
            color: white;
        }

        .option.incorrect {
            background: #dc3545;
            border-color: #dc3545;
            color: white;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .feedback {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            font-weight: 600;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
        }

        .completion-banner {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: none;
        }

        .completion-banner.show {
            display: block;
        }

        @media (max-width: 600px) {
            .quiz-container {
                padding: 20px;
            }
            
            .quiz-title {
                font-size: 2em;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            .flag-emoji {
                font-size: 6em;
            }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1 class="quiz-title">ğŸŒ Complete World Flag Quiz</h1>
        
        <div class="progress-info">
            <div class="global-progress" id="global-progress">Countries Learned: 0 / 195</div>
            <div class="quiz-number" id="quiz-number">Ready to start Quiz #1</div>
            <div class="progress-bar">
                <div class="progress-fill" id="global-progress-fill"></div>
            </div>
        </div>

        <div class="completion-banner" id="completion-banner">
            <h2>ğŸ‰ Congratulations! ğŸ‰</h2>
            <p>You've mastered all 195 countries of the world!</p>
        </div>
        
        <div class="mode-buttons">
            <button class="mode-btn active" data-mode="country">Country Name</button>
            <button class="mode-btn" data-mode="capital">Capital City</button>
            <button class="mode-btn" data-mode="continent">Continent</button>
        </div>

        <div class="score">Current Quiz Score: <span id="current-score">0</span> / <span id="total-questions">10</span></div>

        <div class="flag-emoji" id="flag-emoji">ğŸ</div>
        
        <div class="country-info" id="country-info">
            <div class="info-item">
                <span class="info-label">Country:</span> <span id="country-name">-</span>
            </div>
            <div class="info-item">
                <span class="info-label">Capital:</span> <span id="capital-name">-</span>
            </div>
            <div class="info-item">
                <span class="info-label">Continent:</span> <span id="continent-name">-</span>
            </div>
            <div class="info-item">
                <span class="info-label">Population:</span> <span id="population">-</span>
            </div>
        </div>

        <div class="question" id="question">Click "Start Quiz" to begin learning about world countries!</div>

        <div class="options" id="options" style="display: none;">
            <div class="option" data-option="0"></div>
            <div class="option" data-option="1"></div>
            <div class="option" data-option="2"></div>
            <div class="option" data-option="3"></div>
        </div>

        <div class="feedback" id="feedback" style="display: none;"></div>

        <div class="controls">
            <button class="btn btn-primary" id="start-btn">Start Quiz #1</button>
            <button class="btn btn-primary" id="next-btn" style="display: none;">Next Question</button>
            <button class="btn btn-primary" id="next-quiz-btn" style="display: none;">Start Next Quiz</button>
            <button class="btn btn-secondary" id="reset-btn" style="display: none;">Reset Progress</button>
        </div>
    </div>

    <script>
        // All 195 countries complete list
        const allCountries = [
            // Africa (54)
            {name: "Algeria", capital: "Algiers", continent: "Africa", flag: "ğŸ‡©ğŸ‡¿", population: "44M"},
            {name: "Angola", capital: "Luanda", continent: "Africa", flag: "ğŸ‡¦ğŸ‡´", population: "33M"},
            {name: "Benin", capital: "Porto-Novo", continent: "Africa", flag: "ğŸ‡§ğŸ‡¯", population: "12M"},
            {name: "Botswana", capital: "Gaborone", continent: "Africa", flag: "ğŸ‡§ğŸ‡¼", population: "2.4M"},
            {name: "Burkina Faso", capital: "Ouagadougou", continent: "Africa", flag: "ğŸ‡§ğŸ‡«", population: "22M"},
            {name: "Burundi", capital: "Gitega", continent: "Africa", flag: "ğŸ‡§ğŸ‡®", population: "12M"},
            {name: "Cabo Verde", capital: "Praia", continent: "Africa", flag: "ğŸ‡¨ğŸ‡»", population: "562K"},
            {name: "Cameroon", capital: "YaoundÃ©", continent: "Africa", flag: "ğŸ‡¨ğŸ‡²", population: "27M"},
            {name: "Central African Republic", capital: "Bangui", continent: "Africa", flag: "ğŸ‡¨ğŸ‡«", population: "5M"},
            {name: "Chad", capital: "N'Djamena", continent: "Africa", flag: "ğŸ‡¹ğŸ‡©", population: "17M"},
            {name: "Comoros", capital: "Moroni", continent: "Africa", flag: "ğŸ‡°ğŸ‡²", population: "873K"},
            {name: "Congo", capital: "Brazzaville", continent: "Africa", flag: "ğŸ‡¨ğŸ‡¬", population: "5.5M"},
            {name: "Democratic Republic of Congo", capital: "Kinshasa", continent: "Africa", flag: "ğŸ‡¨ğŸ‡©", population: "95M"},
            {name: "Djibouti", capital: "Djibouti", continent: "Africa", flag: "ğŸ‡©ğŸ‡¯", population: "998K"},
            {name: "Egypt", capital: "Cairo", continent: "Africa", flag: "ğŸ‡ªğŸ‡¬", population: "104M"},
            {name: "Equatorial Guinea", capital: "Malabo", continent: "Africa", flag: "ğŸ‡¬ğŸ‡¶", population: "1.4M"},
            {name: "Eritrea", capital: "Asmara", continent: "Africa", flag: "ğŸ‡ªğŸ‡·", population: "3.6M"},
            {name: "Eswatini", capital: "Mbabane", continent: "Africa", flag: "ğŸ‡¸ğŸ‡¿", population: "1.2M"},
            {name: "Ethiopia", capital: "Addis Ababa", continent: "Africa", flag: "ğŸ‡ªğŸ‡¹", population: "118M"},
            {name: "Gabon", capital: "Libreville", continent: "Africa", flag: "ğŸ‡¬ğŸ‡¦", population: "2.3M"},
            {name: "Gambia", capital: "Banjul", continent: "Africa", flag: "ğŸ‡¬ğŸ‡²", population: "2.4M"},
            {name: "Ghana", capital: "Accra", continent: "Africa", flag: "ğŸ‡¬ğŸ‡­", population: "32M"},
            {name: "Guinea", capital: "Conakry", continent: "Africa", flag: "ğŸ‡¬ğŸ‡³", population: "13M"},
            {name: "Guinea-Bissau", capital: "Bissau", continent: "Africa", flag: "ğŸ‡¬ğŸ‡¼", population: "2M"},
            {name: "Ivory Coast", capital: "Yamoussoukro", continent: "Africa", flag: "ğŸ‡¨ğŸ‡®", population: "27M"},
            {name: "Kenya", capital: "Nairobi", continent: "Africa", flag: "ğŸ‡°ğŸ‡ª", population: "54M"},
            {name: "Lesotho", capital: "Maseru", continent: "Africa", flag: "ğŸ‡±ğŸ‡¸", population: "2.1M"},
            {name: "Liberia", capital: "Monrovia", continent: "Africa", flag: "ğŸ‡±ğŸ‡·", population: "5.1M"},
            {name: "Libya", capital: "Tripoli", continent: "Africa", flag: "ğŸ‡±ğŸ‡¾", population: "7M"},
            {name: "Madagascar", capital: "Antananarivo", continent: "Africa", flag: "ğŸ‡²ğŸ‡¬", population: "28M"},
            {name: "Malawi", capital: "Lilongwe", continent: "Africa", flag: "ğŸ‡²ğŸ‡¼", population: "20M"},
            {name: "Mali", capital: "Bamako", continent: "Africa", flag: "ğŸ‡²ğŸ‡±", population: "21M"},
            {name: "Mauritania", capital: "Nouakchott", continent: "Africa", flag: "ğŸ‡²ğŸ‡·", population: "4.6M"},
            {name: "Mauritius", capital: "Port Louis", continent: "Africa", flag: "ğŸ‡²ğŸ‡º", population: "1.3M"},
            {name: "Morocco", capital: "Rabat", continent: "Africa", flag: "ğŸ‡²ğŸ‡¦", population: "37M"},
            {name: "Mozambique", capital: "Maputo", continent: "Africa", flag: "ğŸ‡²ğŸ‡¿", population: "32M"},
            {name: "Namibia", capital: "Windhoek", continent: "Africa", flag: "ğŸ‡³ğŸ‡¦", population: "2.5M"},
            {name: "Niger", capital: "Niamey", continent: "Africa", flag: "ğŸ‡³ğŸ‡ª", population: "25M"},
            {name: "Nigeria", capital: "Abuja", continent: "Africa", flag: "ğŸ‡³ğŸ‡¬", population: "218M"},
            {name: "Rwanda", capital: "Kigali", continent: "Africa", flag: "ğŸ‡·ğŸ‡¼", population: "13M"},
            {name: "SÃ£o TomÃ© and PrÃ­ncipe", capital: "SÃ£o TomÃ©", continent: "Africa", flag: "ğŸ‡¸ğŸ‡¹", population: "219K"},
            {name: "Senegal", capital: "Dakar", continent: "Africa", flag: "ğŸ‡¸ğŸ‡³", population: "17M"},
            {name: "Seychelles", capital: "Victoria", continent: "Africa", flag: "ğŸ‡¸ğŸ‡¨", population: "98K"},
            {name: "Sierra Leone", capital: "Freetown", continent: "Africa", flag: "ğŸ‡¸ğŸ‡±", population: "8M"},
            {name: "Somalia", capital: "Mogadishu", continent: "Africa", flag: "ğŸ‡¸ğŸ‡´", population: "16M"},
            {name: "South Africa", capital: "Cape Town", continent: "Africa", flag: "ğŸ‡¿ğŸ‡¦", population: "60M"},
            {name: "South Sudan", capital: "Juba", continent: "Africa", flag: "ğŸ‡¸ğŸ‡¸", population: "11M"},
            {name: "Sudan", capital: "Khartoum", continent: "Africa", flag: "ğŸ‡¸ğŸ‡©", population: "45M"},
            {name: "Tanzania", capital: "Dodoma", continent: "Africa", flag: "ğŸ‡¹ğŸ‡¿", population: "61M"},
            {name: "Togo", capital: "LomÃ©", continent: "Africa", flag: "ğŸ‡¹ğŸ‡¬", population: "8M"},
            {name: "Tunisia", capital: "Tunis", continent: "Africa", flag: "ğŸ‡¹ğŸ‡³", population: "12M"},
            {name: "Uganda", capital: "Kampala", continent: "Africa", flag: "ğŸ‡ºğŸ‡¬", population: "47M"},
            {name: "Zambia", capital: "Lusaka", continent: "Africa", flag: "ğŸ‡¿ğŸ‡²", population: "19M"},
            {name: "Zimbabwe", capital: "Harare", continent: "Africa", flag: "ğŸ‡¿ğŸ‡¼", population: "15M"},

            // Asia (48)
            {name: "Afghanistan", capital: "Kabul", continent: "Asia", flag: "ğŸ‡¦ğŸ‡«", population: "38M"},
            {name: "Armenia", capital: "Yerevan", continent: "Asia", flag: "ğŸ‡¦ğŸ‡²", population: "3M"},
            {name: "Azerbaijan", capital: "Baku", continent: "Asia", flag: "ğŸ‡¦ğŸ‡¿", population: "10M"},
            {name: "Bahrain", capital: "Manama", continent: "Asia", flag: "ğŸ‡§ğŸ‡­", population: "1.7M"},
            {name: "Bangladesh", capital: "Dhaka", continent: "Asia", flag: "ğŸ‡§ğŸ‡©", population: "166M"},
            {name: "Bhutan", capital: "Thimphu", continent: "Asia", flag: "ğŸ‡§ğŸ‡¹", population: "772K"},
            {name: "Brunei", capital: "Bandar Seri Begawan", continent: "Asia", flag: "ğŸ‡§ğŸ‡³", population: "441K"},
            {name: "Cambodia", capital: "Phnom Penh", continent: "Asia", flag: "ğŸ‡°ğŸ‡­", population: "17M"},
            {name: "China", capital: "Beijing", continent: "Asia", flag: "ğŸ‡¨ğŸ‡³", population: "1.4B"},
            {name: "Cyprus", capital: "Nicosia", continent: "Asia", flag: "ğŸ‡¨ğŸ‡¾", population: "1.2M"},
            {name: "East Timor", capital: "Dili", continent: "Asia", flag: "ğŸ‡¹ğŸ‡±", population: "1.3M"},
            {name: "Georgia", capital: "Tbilisi", continent: "Asia", flag: "ğŸ‡¬ğŸ‡ª", population: "3.7M"},
            {name: "India", capital: "New Delhi", continent: "Asia", flag: "ğŸ‡®ğŸ‡³", population: "1.4B"},
            {name: "Indonesia", capital: "Jakarta", continent: "Asia", flag: "ğŸ‡®ğŸ‡©", population: "274M"},
            {name: "Iran", capital: "Tehran", continent: "Asia", flag: "ğŸ‡®ğŸ‡·", population: "85M"},
            {name: "Iraq", capital: "Baghdad", continent: "Asia", flag: "ğŸ‡®ğŸ‡¶", population: "41M"},
            {name: "Israel", capital: "Jerusalem", continent: "Asia", flag: "ğŸ‡®ğŸ‡±", population: "9.4M"},
            {name: "Japan", capital: "Tokyo", continent: "Asia", flag: "ğŸ‡¯ğŸ‡µ", population: "125M"},
            {name: "Jordan", capital: "Amman", continent: "Asia", flag: "ğŸ‡¯ğŸ‡´", population: "10M"},
            {name: "Kazakhstan", capital: "Nur-Sultan", continent: "Asia", flag: "ğŸ‡°ğŸ‡¿", population: "19M"},
            {name: "Kuwait", capital: "Kuwait City", continent: "Asia", flag: "ğŸ‡°ğŸ‡¼", population: "4.3M"},
            {name: "Kyrgyzstan", capital: "Bishkek", continent: "Asia", flag: "ğŸ‡°ğŸ‡¬", population: "6.6M"},
            {name: "Laos", capital: "Vientiane", continent: "Asia", flag: "ğŸ‡±ğŸ‡¦", population: "7.3M"},
            {name: "Lebanon", capital: "Beirut", continent: "Asia", flag: "ğŸ‡±ğŸ‡§", population: "6.8M"},
            {name: "Malaysia", capital: "Kuala Lumpur", continent: "Asia", flag: "ğŸ‡²ğŸ‡¾", population: "33M"},
            {name: "Maldives", capital: "MalÃ©", continent: "Asia", flag: "ğŸ‡²ğŸ‡»", population: "541K"},
            {name: "Mongolia", capital: "Ulaanbaatar", continent: "Asia", flag: "ğŸ‡²ğŸ‡³", population: "3.3M"},
            {name: "Myanmar", capital: "Naypyidaw", continent: "Asia", flag: "ğŸ‡²ğŸ‡²", population: "54M"},
            {name: "Nepal", capital: "Kathmandu", continent: "Asia", flag: "ğŸ‡³ğŸ‡µ", population: "30M"},
            {name: "North Korea", capital: "Pyongyang", continent: "Asia", flag: "ğŸ‡°ğŸ‡µ", population: "26M"},
            {name: "Oman", capital: "Muscat", continent: "Asia", flag: "ğŸ‡´ğŸ‡²", population: "5.1M"},
            {name: "Pakistan", capital: "Islamabad", continent: "Asia", flag: "ğŸ‡µğŸ‡°", population: "225M"},
            {name: "Palestine", capital: "Ramallah", continent: "Asia", flag: "ğŸ‡µğŸ‡¸", population: "5M"},
            {name: "Philippines", capital: "Manila", continent: "Asia", flag: "ğŸ‡µğŸ‡­", population: "110M"},
            {name: "Qatar", capital: "Doha", continent: "Asia", flag: "ğŸ‡¶ğŸ‡¦", population: "2.9M"},
            {name: "Russia", capital: "Moscow", continent: "Asia/Europe", flag: "ğŸ‡·ğŸ‡º", population: "146M"},
            {name: "Saudi Arabia", capital: "Riyadh", continent: "Asia", flag: "ğŸ‡¸ğŸ‡¦", population: "35M"},
            {name: "Singapore", capital: "Singapore", continent: "Asia", flag: "ğŸ‡¸ğŸ‡¬", population: "5.9M"},
            {name: "South Korea", capital: "Seoul", continent: "Asia", flag: "ğŸ‡°ğŸ‡·", population: "52M"},
            {name: "Sri Lanka", capital: "Colombo", continent: "Asia", flag: "ğŸ‡±ğŸ‡°", population: "22M"},
            {name: "Syria", capital: "Damascus", continent: "Asia", flag: "ğŸ‡¸ğŸ‡¾", population: "18M"},
            {name: "Tajikistan", capital: "Dushanbe", continent: "Asia", flag: "ğŸ‡¹ğŸ‡¯", population: "9.5M"},
            {name: "Thailand", capital: "Bangkok", continent: "Asia", flag: "ğŸ‡¹ğŸ‡­", population: "70M"},
            {name: "Turkey", capital: "Ankara", continent: "Asia/Europe", flag: "ğŸ‡¹ğŸ‡·", population: "85M"},
            {name: "Turkmenistan", capital: "Ashgabat", continent: "Asia", flag: "ğŸ‡¹ğŸ‡²", population: "6M"},
            {name: "United Arab Emirates", capital: "Abu Dhabi", continent: "Asia", flag: "ğŸ‡¦ğŸ‡ª", population: "10M"},
            {name: "Uzbekistan", capital: "Tashkent", continent: "Asia", flag: "ğŸ‡ºğŸ‡¿", population: "34M"},
            {name: "Vietnam", capital: "Hanoi", continent: "Asia", flag: "ğŸ‡»ğŸ‡³", population: "98M"},
            {name: "Yemen", capital: "Sana'a", continent: "Asia", flag: "ğŸ‡¾ğŸ‡ª", population: "30M"},

            // Europe (44)
            {name: "Albania", capital: "Tirana", continent: "Europe", flag: "ğŸ‡¦ğŸ‡±", population: "2.9M"},
            {name: "Andorra", capital: "Andorra la Vella", continent: "Europe", flag: "ğŸ‡¦ğŸ‡©", population: "79K"},
            {name: "Austria", capital: "Vienna", continent: "Europe", flag: "ğŸ‡¦ğŸ‡¹", population: "9M"},
            {name: "Belarus", capital: "Minsk", continent: "Europe", flag: "ğŸ‡§ğŸ‡¾", population: "9.4M"},
            {name: "Belgium", capital: "Brussels", continent: "Europe", flag: "ğŸ‡§ğŸ‡ª", population: "11.5M"},
            {name: "Bosnia and Herzegovina", capital: "Sarajevo", continent: "Europe", flag: "ğŸ‡§ğŸ‡¦", population: "3.3M"},
            {name: "Bulgaria", capital: "Sofia", continent: "Europe", flag: "ğŸ‡§ğŸ‡¬", population: "7M"},
            {name: "Croatia", capital: "Zagreb", continent: "Europe", flag: "ğŸ‡­ğŸ‡·", population: "3.9M"},
            {name: "Czech Republic", capital: "Prague", continent: "Europe", flag: "ğŸ‡¨ğŸ‡¿", population: "10.7M"},
            {name: "Denmark", capital: "Copenhagen", continent: "Europe", flag: "ğŸ‡©ğŸ‡°", population: "5.8M"},
            {name: "Estonia", capital: "Tallinn", continent: "Europe", flag: "ğŸ‡ªğŸ‡ª", population: "1.3M"},
            {name: "Finland", capital: "Helsinki", continent: "Europe", flag: "ğŸ‡«ğŸ‡®", population: "5.5M"},
            {name: "France", capital: "Paris", continent: "Europe", flag: "ğŸ‡«ğŸ‡·", population: "68M"},
            {name: "Germany", capital: "Berlin", continent: "Europe", flag: "ğŸ‡©ğŸ‡ª", population: "83M"},
            {name: "Greece", capital: "Athens", continent: "Europe", flag: "ğŸ‡¬ğŸ‡·", population: "10.7M"},
            {name: "Hungary", capital: "Budapest", continent: "Europe", flag: "ğŸ‡­ğŸ‡º", population: "9.7M"},
            {name: "Iceland", capital: "Reykjavik", continent: "Europe", flag: "ğŸ‡®ğŸ‡¸", population: "372K"},
            {name: "Ireland", capital: "Dublin", continent: "Europe", flag: "ğŸ‡®ğŸ‡ª", population: "5M"},
            {name: "Italy", capital: "Rome", continent: "Europe", flag: "ğŸ‡®ğŸ‡¹", population: "59M"},
            {name: "Latvia", capital: "Riga", continent: "Europe", flag: "ğŸ‡±ğŸ‡»", population: "1.9M"},
            {name: "Liechtenstein", capital: "Vaduz", continent: "Europe", flag: "ğŸ‡±ğŸ‡®", population: "38K"},
            {name: "Lithuania", capital: "Vilnius", continent: "Europe", flag: "ğŸ‡±ğŸ‡¹", population: "2.8M"},
            {name: "Luxembourg", capital: "Luxembourg", continent: "Europe", flag: "ğŸ‡±ğŸ‡º", population: "634K"},
            {name: "Malta", capital: "Valletta", continent: "Europe", flag: "ğŸ‡²ğŸ‡¹", population: "518K"},
            {name: "Moldova", capital: "ChiÈ™inÄƒu", continent: "Europe", flag: "ğŸ‡²ğŸ‡©", population: "2.6M"},
            {name: "Monaco", capital: "Monaco", continent: "Europe", flag: "ğŸ‡²ğŸ‡¨", population: "39K"},
            {name: "Montenegro", capital: "Podgorica", continent: "Europe", flag: "ğŸ‡²ğŸ‡ª", population: "628K"},
            {name: "Netherlands", capital: "Amsterdam", continent: "Europe", flag: "ğŸ‡³ğŸ‡±", population: "17M"},
            {name: "North Macedonia", capital: "Skopje", continent: "Europe", flag: "ğŸ‡²ğŸ‡°", population: "2.1M"},
            {name: "Norway", capital: "Oslo", continent: "Europe", flag: "ğŸ‡³ğŸ‡´", population: "5.4M"},
            {name: "Poland", capital: "Warsaw", continent: "Europe", flag: "ğŸ‡µğŸ‡±", population: "38M"},
            {name: "Portugal", capital: "Lisbon", continent: "Europe", flag: "ğŸ‡µğŸ‡¹", population: "10M"},
            {name: "Romania", capital: "Bucharest", continent: "Europe", flag: "ğŸ‡·ğŸ‡´", population: "19M"},
            {name: "San Marino", capital: "San Marino", continent: "Europe", flag: "ğŸ‡¸ğŸ‡²", population: "34K"},
            {name: "Serbia", capital: "Belgrade", continent: "Europe", flag: "ğŸ‡·ğŸ‡¸", population: "7M"},
            {name: "Slovakia", capital: "Bratislava", continent: "Europe", flag: "ğŸ‡¸ğŸ‡°", population: "5.5M"},
            {name: "Slovenia", capital: "Ljubljana", continent: "Europe", flag: "ğŸ‡¸ğŸ‡®", population: "2.1M"},
            {name: "Spain", capital: "Madrid", continent: "Europe", flag: "ğŸ‡ªğŸ‡¸", population: "47M"},
            {name: "Sweden", capital: "Stockholm", continent: "Europe", flag: "ğŸ‡¸ğŸ‡ª", population: "10M"},
            {name: "Switzerland", capital: "Bern", continent: "Europe", flag: "ğŸ‡¨ğŸ‡­", population: "8.7M"},
            {name: "Ukraine", capital: "Kyiv", continent: "Europe", flag: "ğŸ‡ºğŸ‡¦", population: "41M"},
            {name: "United Kingdom", capital: "London", continent: "Europe", flag: "ğŸ‡¬ğŸ‡§", population: "67M"},
            {name: "Vatican City", capital: "Vatican City", continent: "Europe", flag: "ğŸ‡»ğŸ‡¦", population: "825"},

            // North America (23)
            {name: "Antigua and Barbuda", capital: "Saint John's", continent: "North America", flag: "ğŸ‡¦ğŸ‡¬", population: "98K"},
            {name: "Bahamas", capital: "Nassau", continent: "North America", flag: "ğŸ‡§ğŸ‡¸", population: "394K"},
            {name: "Barbados", capital: "Bridgetown", continent: "North America", flag: "ğŸ‡§ğŸ‡§", population: "288K"},
            {name: "Belize", capital: "Belmopan", continent: "North America", flag: "ğŸ‡§ğŸ‡¿", population: "398K"},
            {name: "Canada", capital: "Ottawa", continent: "North America", flag: "ğŸ‡¨ğŸ‡¦", population: "38M"},
            {name: "Costa Rica", capital: "San JosÃ©", continent: "North America", flag: "ğŸ‡¨ğŸ‡·", population: "5.1M"},
            {name: "Cuba", capital: "Havana", continent: "North America", flag: "ğŸ‡¨ğŸ‡º", population: "11M"},
            {name: "Dominica", capital: "Roseau", continent: "North America", flag: "ğŸ‡©ğŸ‡²", population: "72K"},
            {name: "Dominican Republic", capital: "Santo Domingo", continent: "North America", flag: "ğŸ‡©ğŸ‡´", population: "11M"},
            {name: "El Salvador", capital: "San Salvador", continent: "North America", flag: "ğŸ‡¸ğŸ‡»", population: "6.5M"},
            {name: "Grenada", capital: "Saint George's", continent: "North America", flag: "ğŸ‡¬ğŸ‡©", population: "113K"},
            {name: "Guatemala", capital: "Guatemala City", continent: "North America", flag: "ğŸ‡¬ğŸ‡¹", population: "17M"},
            {name: "Haiti", capital: "Port-au-Prince", continent: "North America", flag: "ğŸ‡­ğŸ‡¹", population: "11M"},
            {name: "Honduras", capital: "Tegucigalpa", continent: "North America", flag: "ğŸ‡­ğŸ‡³", population: "10M"},
            {name: "Jamaica", capital: "Kingston", continent: "North America", flag: "ğŸ‡¯ğŸ‡²", population: "2.9M"},
            {name: "Mexico", capital: "Mexico City", continent: "North America", flag: "ğŸ‡²ğŸ‡½", population: "129M"},
            {name: "Nicaragua", capital: "Managua", continent: "North America", flag: "ğŸ‡³ğŸ‡®", population: "6.6M"},
            {name: "Panama", capital: "Panama City", continent: "North America", flag: "ğŸ‡µğŸ‡¦", population: "4.3M"},
            {name: "Saint Kitts and Nevis", capital: "Basseterre", continent: "North America", flag: "ğŸ‡°ğŸ‡³", population: "53K"},
            {name: "Saint Lucia", capital: "Castries", continent: "North America", flag: "ğŸ‡±ğŸ‡¨", population: "184K"},
            {name: "Saint Vincent and the Grenadines", capital: "Kingstown", continent: "North America", flag: "ğŸ‡»ğŸ‡¨", population: "111K"},
            {name: "Trinidad and Tobago", capital: "Port of Spain", continent: "North America", flag: "ğŸ‡¹ğŸ‡¹", population: "1.4M"},
            {name: "United States", capital: "Washington, D.C.", continent: "North America", flag: "ğŸ‡ºğŸ‡¸", population: "333M"},

            // Oceania (14)
            {name: "Australia", capital: "Canberra", continent: "Oceania", flag: "ğŸ‡¦ğŸ‡º", population: "26M"},
            {name: "Fiji", capital: "Suva", continent: "Oceania", flag: "ğŸ‡«ğŸ‡¯", population: "898K"},
            {name: "Kiribati", capital: "Tarawa", continent: "Oceania", flag: "ğŸ‡°ğŸ‡®", population: "121K"},
            {name: "Marshall Islands", capital: "Majuro", continent: "Oceania", flag: "ğŸ‡²ğŸ‡­", population: "59K"},
            {name: "Micronesia", capital: "Palikir", continent: "Oceania", flag: "ğŸ‡«ğŸ‡²", population: "115K"},
            {name: "Nauru", capital: "Yaren", continent: "Oceania", flag: "ğŸ‡³ğŸ‡·", population: "11K"},
            {name: "New Zealand", capital: "Wellington", continent: "Oceania", flag: "ğŸ‡³ğŸ‡¿", population: "5.1M"},
            {name: "Palau", capital: "Ngerulmud", continent: "Oceania", flag: "ğŸ‡µğŸ‡¼", population: "18K"},
            {name: "Papua New Guinea", capital: "Port Moresby", continent: "Oceania", flag: "ğŸ‡µğŸ‡¬", population: "9M"},
            {name: "Samoa", capital: "Apia", continent: "Oceania", flag: "ğŸ‡¼ğŸ‡¸", population: "199K"},
            {name: "Solomon Islands", capital: "Honiara", continent: "Oceania", flag: "ğŸ‡¸ğŸ‡§", population: "687K"},
            {name: "Tonga", capital: "Nuku'alofa", continent: "Oceania", flag: "ğŸ‡¹ğŸ‡´", population: "106K"},
            {name: "Tuvalu", capital: "Funafuti", continent: "Oceania", flag: "ğŸ‡¹ğŸ‡»", population: "12K"},
            {name: "Vanuatu", capital: "Port Vila", continent: "Oceania", flag: "ğŸ‡»ğŸ‡º", population: "307K"},

            // South America (12)
            {name: "Argentina", capital: "Buenos Aires", continent: "South America", flag: "ğŸ‡¦ğŸ‡·", population: "45M"},
            {name: "Bolivia", capital: "Sucre", continent: "South America", flag: "ğŸ‡§ğŸ‡´", population: "12M"},
            {name: "Brazil", capital: "BrasÃ­lia", continent: "South America", flag: "ğŸ‡§ğŸ‡·", population: "215M"},
            {name: "Chile", capital: "Santiago", continent: "South America", flag: "ğŸ‡¨ğŸ‡±", population: "19M"},
            {name: "Colombia", capital: "BogotÃ¡", continent: "South America", flag: "ğŸ‡¨ğŸ‡´", population: "51M"},
            {name: "Ecuador", capital: "Quito", continent: "South America", flag: "ğŸ‡ªğŸ‡¨", population: "18M"},
            {name: "Guyana", capital: "Georgetown", continent: "South America", flag: "ğŸ‡¬ğŸ‡¾", population: "787K"},
            {name: "Paraguay", capital: "AsunciÃ³n", continent: "South America", flag: "ğŸ‡µğŸ‡¾", population: "7.1M"},
            {name: "Peru", capital: "Lima", continent: "South America", flag: "ğŸ‡µğŸ‡ª", population: "33M"},
            {name: "Suriname", capital: "Paramaribo", continent: "South America", flag: "ğŸ‡¸ğŸ‡·", population: "587K"},
            {name: "Uruguay", capital: "Montevideo", continent: "South America", flag: "ğŸ‡ºğŸ‡¾", population: "3.5M"},
            {name: "Venezuela", capital: "Caracas", continent: "South America", flag: "ğŸ‡»ğŸ‡ª", population: "28M"}
        ];

        // Global progress tracking with localStorage
        let globalProgress = {
            learnedCountries: [],
            currentQuiz: 1
        };

        // Load saved progress
        try {
            const saved = localStorage.getItem('flagQuizProgress');
            if (saved) {
                globalProgress = JSON.parse(saved);
            }
        } catch (e) {
            console.log('localStorage not available, using session storage');
        }

        let currentQuestionIndex = 0;
        let score = 0;
        let currentCountry = null;
        let selectedAnswer = null;
        let quizMode = 'country';
        let currentQuizCountries = [];

        const elements = {
            flagEmoji: document.getElementById('flag-emoji'),
            countryInfo: document.getElementById('country-info'),
            countryName: document.getElementById('country-name'),
            capitalName: document.getElementById('capital-name'),
            continentName: document.getElementById('continent-name'),
            population: document.getElementById('population'),
            question: document.getElementById('question'),
            options: document.getElementById('options'),
            feedback: document.getElementById('feedback'),
            startBtn: document.getElementById('start-btn'),
            nextBtn: document.getElementById('next-btn'),
            nextQuizBtn: document.getElementById('next-quiz-btn'),
            resetBtn: document.getElementById('reset-btn'),
            currentScore: document.getElementById('current-score'),
            totalQuestions: document.getElementById('total-questions'),
            globalProgress: document.getElementById('global-progress'),
            quizNumber: document.getElementById('quiz-number'),
            globalProgressFill: document.getElementById('global-progress-fill'),
            completionBanner: document.getElementById('completion-banner')
        };

        function saveProgress() {
            try {
                localStorage.setItem('flagQuizProgress', JSON.stringify(globalProgress));
            } catch (e) {
                console.log('Could not save to localStorage');
            }
        }

        function updateGlobalProgress() {
            const learned = globalProgress.learnedCountries.length;
            const total = allCountries.length;
            const percentage = (learned / total) * 100;
            
            elements.globalProgress.textContent = `Countries Learned: ${learned} / ${total}`;
            elements.globalProgressFill.style.width = percentage + '%';
            
            if (learned === total) {
                elements.quizNumber.textContent = "ğŸ‰ All countries learned!";
                elements.completionBanner.classList.add('show');
            } else {
                elements.quizNumber.textContent = `Quiz #${globalProgress.currentQuiz} - Learn 10 new countries`;
                elements.completionBanner.classList.remove('show');
            }
        }

        function getUnlearnedCountries() {
            return allCountries.filter(country => 
                !globalProgress.learnedCountries.some(learned => learned.name === country.name)
            );
        }

        function getSimilarCountries(targetCountry, count = 3) {
            // First try same continent
            const sameContinent = allCountries.filter(c => 
                c !== targetCountry && 
                c.continent === targetCountry.continent
            );
            
            if (sameContinent.length >= count) {
                return sameContinent.sort(() => Math.random() - 0.5).slice(0, count);
            }
            
            // If not enough, use any countries
            const others = allCountries.filter(c => c !== targetCountry);
            return others.sort(() => Math.random() - 0.5).slice(0, count);
        }

        function generateQuestion() {
            if (currentQuestionIndex >= 10) {
                endQuiz();
                return;
            }

            if (currentQuizCountries.length === 0) {
                const unlearned = getUnlearnedCountries();
                if (unlearned.length === 0) {
                    showCompletionMessage();
                    return;
                }
                currentQuizCountries = unlearned.slice(0, 10);
            }

            currentCountry = currentQuizCountries[currentQuestionIndex];
            
            elements.flagEmoji.textContent = currentCountry.flag;
            elements.countryInfo.classList.remove('show');

            const incorrectOptions = getSimilarCountries(currentCountry, 3);
            const allOptions = [currentCountry, ...incorrectOptions].sort(() => Math.random() - 0.5);

            let questionText = '';
            let correctAnswer = '';

            switch (quizMode) {
                case 'country':
                    questionText = 'Which country does this flag belong to?';
                    correctAnswer = currentCountry.name;
                    break;
                case 'capital':
                    questionText = 'What is the capital city of this country?';
                    correctAnswer = currentCountry.capital;
                    break;
                case 'continent':
                    questionText = 'Which continent is this country located in?';
                    correctAnswer = currentCountry.continent;
                    break;
            }

            elements.question.textContent = questionText;

            const optionElements = elements.options.querySelectorAll('.option');
            optionElements.forEach((option, index) => {
                option.className = 'option';
                let optionText = '';
                
                switch (quizMode) {
                    case 'country':
                        optionText = allOptions[index].name;
                        break;
                    case 'capital':
                        optionText = allOptions[index].capital;
                        break;
                    case 'continent':
                        optionText = allOptions[index].continent;
                        break;
                }
                
                option.textContent = optionText;
                option.dataset.correct = (optionText === correctAnswer).toString();
            });

            selectedAnswer = null;
            elements.options.style.display = 'grid';
            elements.feedback.style.display = 'none';
            elements.nextBtn.style.display = 'none';

            currentQuestionIndex++;
        }

        function selectOption(optionElement) {
            if (selectedAnswer !== null) return;

            selectedAnswer = optionElement;
            optionElement.classList.add('selected');

            const optionElements = elements.options.querySelectorAll('.option');
            optionElements.forEach(option => {
                if (option.dataset.correct === 'true') {
                    option.classList.add('correct');
                } else if (option === optionElement && option.dataset.correct === 'false') {
                    option.classList.add('incorrect');
                }
            });

            const isCorrect = optionElement.dataset.correct === 'true';
            if (isCorrect) {
                score++;
                elements.feedback.textContent = 'âœ“ Correct! Well done!';
                elements.feedback.className = 'feedback correct';
            } else {
                const correctOption = [...optionElements].find(opt => opt.dataset.correct === 'true');
                elements.feedback.textContent = `âœ— Incorrect. The correct answer is: ${correctOption.textContent}`;
                elements.feedback.className = 'feedback incorrect';
            }

            elements.feedback.style.display = 'flex';
            elements.currentScore.textContent = score;

            // Show country info
            elements.countryName.textContent = currentCountry.name;
            elements.capitalName.textContent = currentCountry.capital;
            elements.continentName.textContent = currentCountry.continent;
            elements.population.textContent = currentCountry.population;
            elements.countryInfo.classList.add('show');

            // Mark country as learned
            if (!globalProgress.learnedCountries.some(c => c.name === currentCountry.name)) {
                globalProgress.learnedCountries.push(currentCountry);
                saveProgress();
                updateGlobalProgress();
            }

            elements.nextBtn.style.display = 'inline-block';
        }

        function endQuiz() {
            const percentage = Math.round((score / 10) * 100);
            elements.question.textContent = `Quiz #${globalProgress.currentQuiz} Complete! Score: ${score}/10 (${percentage}%)`;
            elements.options.style.display = 'none';
            elements.feedback.style.display = 'none';
            elements.nextBtn.style.display = 'none';
            elements.flagEmoji.textContent = score >= 7 ? 'ğŸ†' : 'ğŸ“š';
            elements.countryInfo.classList.remove('show');

            globalProgress.currentQuiz++;
            saveProgress();
            updateGlobalProgress();

            if (getUnlearnedCountries().length > 0) {
                elements.nextQuizBtn.style.display = 'inline-block';
            } else {
                showCompletionMessage();
            }
            
            elements.resetBtn.style.display = 'inline-block';
        }

        function showCompletionMessage() {
            elements.question.textContent = "ğŸ‰ Congratulations! You've learned all 195 countries! ğŸ‰";
            elements.flagEmoji.textContent = 'ğŸŒ';
            elements.nextQuizBtn.style.display = 'none';
            elements.resetBtn.style.display = 'inline-block';
            elements.completionBanner.classList.add('show');
        }

        function startNewQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            currentQuizCountries = [];
            selectedAnswer = null;
            elements.currentScore.textContent = '0';
            elements.startBtn.style.display = 'none';
            elements.nextQuizBtn.style.display = 'none';
            elements.resetBtn.style.display = 'none';
            generateQuestion();
        }

        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress? This will clear all learned countries.')) {
                globalProgress = {learnedCountries: [], currentQuiz: 1};
                saveProgress();
                location.reload();
            }
        }

        // Event listeners
        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                quizMode = btn.dataset.mode;
            });
        });

        elements.startBtn.addEventListener('click', startNewQuiz);
        elements.nextBtn.addEventListener('click', generateQuestion);
        elements.nextQuizBtn.addEventListener('click', startNewQuiz);
        elements.resetBtn.addEventListener('click', resetProgress);

        elements.options.addEventListener('click', (e) => {
            if (e.target.classList.contains('option')) {
                selectOption(e.target);
            }
        });

        // Initialize
        updateGlobalProgress();
    </script>
    </body>
</html>
