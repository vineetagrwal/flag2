<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete World Flag Quiz</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .quiz-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 700px;
            width: 100%;
            text-align: center;
        }
        .quiz-title {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .progress-info {
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        .global-progress { font-size: 1.1em; color: #333; margin-bottom: 10px; }
        .quiz-number { font-size: 1em; color: #666; margin-bottom: 15px; }
        .progress-bar {
            width: 100%; height: 8px; background: #e9ecef; border-radius: 4px; overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            transition: width 0.3s ease;
            width: 0%;
        }
        .mode-buttons {
            display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin-bottom: 20px;
        }
        .mode-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .mode-btn.active { background: #667eea; color: white; }
        .score { font-size: 1.2em; color: #666; margin-bottom: 20px; }
        .flag-emoji {
            font-size: 8em;
            line-height: 1;
            margin: 20px 0;
            display: block;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .country-info {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            display: none;
        }
        .country-info.show { display: block; }
        .info-item { margin-bottom: 8px; font-size: 1.1em; }
        .info-label { font-weight: 600; color: #667eea; }
        .question { font-size: 1.3em; color: #333; margin-bottom: 25px; }
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
        }
        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
            font-weight: 500;
        }
        .option:hover {
            background: #e9ecef;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        .option.correct {
            background: #28a745;
            border-color: #28a745;
            color: white;
        }
        .option.incorrect {
            background: #dc3545;
            border-color: #dc3545;
            color: white;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(102, 126, 234, 0.4);
        }
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        .feedback {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            font-weight: 600;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .feedback.correct {
            background: #d4edda;
            color: #155724;
        }
        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
        }
        .completion-banner {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: none;
        }
        .completion-banner.show { display: block; }
        @media (max-width: 600px) {
            .quiz-container { padding: 20px; }
            .quiz-title { font-size: 2em; }
            .options { grid-template-columns: 1fr; }
            .flag-emoji { font-size: 6em; }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1 class="quiz-title">üåç Complete World Flag Quiz</h1>
        <div class="progress-info">
            <div class="global-progress" id="global-progress">Countries Learned: 0 / 195</div>
            <div class="quiz-number" id="quiz-number">Ready to start Quiz #1</div>
            <div class="progress-bar">
                <div class="progress-fill" id="global-progress-fill"></div>
            </div>
        </div>
        <div class="completion-banner" id="completion-banner">
            <h2>üéâ Congratulations! üéâ</h2>
            <p>You've mastered all 195 countries of the world!</p>
        </div>
        <div class="mode-buttons">
            <button class="mode-btn active" data-mode="country">Country Name</button>
            <button class="mode-btn" data-mode="capital">Capital City</button>
            <button class="mode-btn" data-mode="continent">Continent</button>
        </div>
        <div class="score">Current Quiz Score: <span id="current-score">0</span> / <span id="total-questions">10</span></div>
        <div class="flag-emoji" id="flag-emoji">üèÅ</div>
        <div class="country-info" id="country-info">
            <div class="info-item"><span class="info-label">Country:</span> <span id="country-name">-</span></div>
            <div class="info-item"><span class="info-label">Capital:</span> <span id="capital-name">-</span></div>
            <div class="info-item"><span class="info-label">Continent:</span> <span id="continent-name">-</span></div>
            <div class="info-item"><span class="info-label">Population:</span> <span id="population">-</span></div>
        </div>
        <div class="question" id="question">Click "Start Quiz" to begin learning about world countries!</div>
        <div class="options" id="options" style="display: none;">
            <div class="option" data-option="0"></div>
            <div class="option" data-option="1"></div>
            <div class="option" data-option="2"></div>
            <div class="option" data-option="3"></div>
        </div>
        <div class="feedback" id="feedback" style="display: none;"></div>
        <div class="controls">
            <button class="btn btn-primary" id="start-btn">Start Quiz #1</button>
            <button class="btn btn-primary" id="next-btn" style="display: none;">Next Question</button>
            <button class="btn btn-primary" id="next-quiz-btn" style="display: none;">Start Next Quiz</button>
            <button class="btn btn-secondary" id="reset-btn" style="display: none;">Reset Progress</button>
        </div>
    </div>
    <script>
        // Countries array
 // All 195 countries complete list
        const allCountries = [
            // Africa (54)
            {name: "Algeria", capital: "Algiers", continent: "Africa", flag: "üá©üáø", population: "44M"},
            {name: "Angola", capital: "Luanda", continent: "Africa", flag: "üá¶üá¥", population: "33M"},
            {name: "Benin", capital: "Porto-Novo", continent: "Africa", flag: "üáßüáØ", population: "12M"},
            {name: "Botswana", capital: "Gaborone", continent: "Africa", flag: "üáßüáº", population: "2.4M"},
            {name: "Burkina Faso", capital: "Ouagadougou", continent: "Africa", flag: "üáßüá´", population: "22M"},
            {name: "Burundi", capital: "Gitega", continent: "Africa", flag: "üáßüáÆ", population: "12M"},
            {name: "Cabo Verde", capital: "Praia", continent: "Africa", flag: "üá®üáª", population: "562K"},
            {name: "Cameroon", capital: "Yaound√©", continent: "Africa", flag: "üá®üá≤", population: "27M"},
            {name: "Central African Republic", capital: "Bangui", continent: "Africa", flag: "üá®üá´", population: "5M"},
            {name: "Chad", capital: "N'Djamena", continent: "Africa", flag: "üáπüá©", population: "17M"},
            {name: "Comoros", capital: "Moroni", continent: "Africa", flag: "üá∞üá≤", population: "873K"},
            {name: "Congo", capital: "Brazzaville", continent: "Africa", flag: "üá®üá¨", population: "5.5M"},
            {name: "Democratic Republic of Congo", capital: "Kinshasa", continent: "Africa", flag: "üá®üá©", population: "95M"},
            {name: "Djibouti", capital: "Djibouti", continent: "Africa", flag: "üá©üáØ", population: "998K"},
            {name: "Egypt", capital: "Cairo", continent: "Africa", flag: "üá™üá¨", population: "104M"},
            {name: "Equatorial Guinea", capital: "Malabo", continent: "Africa", flag: "üá¨üá∂", population: "1.4M"},
            {name: "Eritrea", capital: "Asmara", continent: "Africa", flag: "üá™üá∑", population: "3.6M"},
            {name: "Eswatini", capital: "Mbabane", continent: "Africa", flag: "üá∏üáø", population: "1.2M"},
            {name: "Ethiopia", capital: "Addis Ababa", continent: "Africa", flag: "üá™üáπ", population: "118M"},
            {name: "Gabon", capital: "Libreville", continent: "Africa", flag: "üá¨üá¶", population: "2.3M"},
            {name: "Gambia", capital: "Banjul", continent: "Africa", flag: "üá¨üá≤", population: "2.4M"},
            {name: "Ghana", capital: "Accra", continent: "Africa", flag: "üá¨üá≠", population: "32M"},
            {name: "Guinea", capital: "Conakry", continent: "Africa", flag: "üá¨üá≥", population: "13M"},
            {name: "Guinea-Bissau", capital: "Bissau", continent: "Africa", flag: "üá¨üáº", population: "2M"},
            {name: "Ivory Coast", capital: "Yamoussoukro", continent: "Africa", flag: "üá®üáÆ", population: "27M"},
            {name: "Kenya", capital: "Nairobi", continent: "Africa", flag: "üá∞üá™", population: "54M"},
            {name: "Lesotho", capital: "Maseru", continent: "Africa", flag: "üá±üá∏", population: "2.1M"},
            {name: "Liberia", capital: "Monrovia", continent: "Africa", flag: "üá±üá∑", population: "5.1M"},
            {name: "Libya", capital: "Tripoli", continent: "Africa", flag: "üá±üáæ", population: "7M"},
            {name: "Madagascar", capital: "Antananarivo", continent: "Africa", flag: "üá≤üá¨", population: "28M"},
            {name: "Malawi", capital: "Lilongwe", continent: "Africa", flag: "üá≤üáº", population: "20M"},
            {name: "Mali", capital: "Bamako", continent: "Africa", flag: "üá≤üá±", population: "21M"},
            {name: "Mauritania", capital: "Nouakchott", continent: "Africa", flag: "üá≤üá∑", population: "4.6M"},
            {name: "Mauritius", capital: "Port Louis", continent: "Africa", flag: "üá≤üá∫", population: "1.3M"},
            {name: "Morocco", capital: "Rabat", continent: "Africa", flag: "üá≤üá¶", population: "37M"},
            {name: "Mozambique", capital: "Maputo", continent: "Africa", flag: "üá≤üáø", population: "32M"},
            {name: "Namibia", capital: "Windhoek", continent: "Africa", flag: "üá≥üá¶", population: "2.5M"},
            {name: "Niger", capital: "Niamey", continent: "Africa", flag: "üá≥üá™", population: "25M"},
            {name: "Nigeria", capital: "Abuja", continent: "Africa", flag: "üá≥üá¨", population: "218M"},
            {name: "Rwanda", capital: "Kigali", continent: "Africa", flag: "üá∑üáº", population: "13M"},
            {name: "S√£o Tom√© and Pr√≠ncipe", capital: "S√£o Tom√©", continent: "Africa", flag: "üá∏üáπ", population: "219K"},
            {name: "Senegal", capital: "Dakar", continent: "Africa", flag: "üá∏üá≥", population: "17M"},
            {name: "Seychelles", capital: "Victoria", continent: "Africa", flag: "üá∏üá®", population: "98K"},
            {name: "Sierra Leone", capital: "Freetown", continent: "Africa", flag: "üá∏üá±", population: "8M"},
            {name: "Somalia", capital: "Mogadishu", continent: "Africa", flag: "üá∏üá¥", population: "16M"},
            {name: "South Africa", capital: "Cape Town", continent: "Africa", flag: "üáøüá¶", population: "60M"},
            {name: "South Sudan", capital: "Juba", continent: "Africa", flag: "üá∏üá∏", population: "11M"},
            {name: "Sudan", capital: "Khartoum", continent: "Africa", flag: "üá∏üá©", population: "45M"},
            {name: "Tanzania", capital: "Dodoma", continent: "Africa", flag: "üáπüáø", population: "61M"},
            {name: "Togo", capital: "Lom√©", continent: "Africa", flag: "üáπüá¨", population: "8M"},
            {name: "Tunisia", capital: "Tunis", continent: "Africa", flag: "üáπüá≥", population: "12M"},
            {name: "Uganda", capital: "Kampala", continent: "Africa", flag: "üá∫üá¨", population: "47M"},
            {name: "Zambia", capital: "Lusaka", continent: "Africa", flag: "üáøüá≤", population: "19M"},
            {name: "Zimbabwe", capital: "Harare", continent: "Africa", flag: "üáøüáº", population: "15M"},

            // Asia (48)
            {name: "Afghanistan", capital: "Kabul", continent: "Asia", flag: "üá¶üá´", population: "38M"},
            {name: "Armenia", capital: "Yerevan", continent: "Asia", flag: "üá¶üá≤", population: "3M"},
            {name: "Azerbaijan", capital: "Baku", continent: "Asia", flag: "üá¶üáø", population: "10M"},
            {name: "Bahrain", capital: "Manama", continent: "Asia", flag: "üáßüá≠", population: "1.7M"},
            {name: "Bangladesh", capital: "Dhaka", continent: "Asia", flag: "üáßüá©", population: "166M"},
            {name: "Bhutan", capital: "Thimphu", continent: "Asia", flag: "üáßüáπ", population: "772K"},
            {name: "Brunei", capital: "Bandar Seri Begawan", continent: "Asia", flag: "üáßüá≥", population: "441K"},
            {name: "Cambodia", capital: "Phnom Penh", continent: "Asia", flag: "üá∞üá≠", population: "17M"},
            {name: "China", capital: "Beijing", continent: "Asia", flag: "üá®üá≥", population: "1.4B"},
            {name: "Cyprus", capital: "Nicosia", continent: "Asia", flag: "üá®üáæ", population: "1.2M"},
            {name: "East Timor", capital: "Dili", continent: "Asia", flag: "üáπüá±", population: "1.3M"},
            {name: "Georgia", capital: "Tbilisi", continent: "Asia", flag: "üá¨üá™", population: "3.7M"},
            {name: "India", capital: "New Delhi", continent: "Asia", flag: "üáÆüá≥", population: "1.4B"},
            {name: "Indonesia", capital: "Jakarta", continent: "Asia", flag: "üáÆüá©", population: "274M"},
            {name: "Iran", capital: "Tehran", continent: "Asia", flag: "üáÆüá∑", population: "85M"},
            {name: "Iraq", capital: "Baghdad", continent: "Asia", flag: "üáÆüá∂", population: "41M"},
            {name: "Israel", capital: "Jerusalem", continent: "Asia", flag: "üáÆüá±", population: "9.4M"},
            {name: "Japan", capital: "Tokyo", continent: "Asia", flag: "üáØüáµ", population: "125M"},
            {name: "Jordan", capital: "Amman", continent: "Asia", flag: "üáØüá¥", population: "10M"},
            {name: "Kazakhstan", capital: "Nur-Sultan", continent: "Asia", flag: "üá∞üáø", population: "19M"},
            {name: "Kuwait", capital: "Kuwait City", continent: "Asia", flag: "üá∞üáº", population: "4.3M"},
            {name: "Kyrgyzstan", capital: "Bishkek", continent: "Asia", flag: "üá∞üá¨", population: "6.6M"},
            {name: "Laos", capital: "Vientiane", continent: "Asia", flag: "üá±üá¶", population: "7.3M"},
            {name: "Lebanon", capital: "Beirut", continent: "Asia", flag: "üá±üáß", population: "6.8M"},
            {name: "Malaysia", capital: "Kuala Lumpur", continent: "Asia", flag: "üá≤üáæ", population: "33M"},
            {name: "Maldives", capital: "Mal√©", continent: "Asia", flag: "üá≤üáª", population: "541K"},
            {name: "Mongolia", capital: "Ulaanbaatar", continent: "Asia", flag: "üá≤üá≥", population: "3.3M"},
            {name: "Myanmar", capital: "Naypyidaw", continent: "Asia", flag: "üá≤üá≤", population: "54M"},
            {name: "Nepal", capital: "Kathmandu", continent: "Asia", flag: "üá≥üáµ", population: "30M"},
            {name: "North Korea", capital: "Pyongyang", continent: "Asia", flag: "üá∞üáµ", population: "26M"},
            {name: "Oman", capital: "Muscat", continent: "Asia", flag: "üá¥üá≤", population: "5.1M"},
            {name: "Pakistan", capital: "Islamabad", continent: "Asia", flag: "üáµüá∞", population: "225M"},
            {name: "Palestine", capital: "Ramallah", continent: "Asia", flag: "üáµüá∏", population: "5M"},
            {name: "Philippines", capital: "Manila", continent: "Asia", flag: "üáµüá≠", population: "110M"},
            {name: "Qatar", capital: "Doha", continent: "Asia", flag: "üá∂üá¶", population: "2.9M"},
            {name: "Russia", capital: "Moscow", continent: "Asia/Europe", flag: "üá∑üá∫", population: "146M"},
            {name: "Saudi Arabia", capital: "Riyadh", continent: "Asia", flag: "üá∏üá¶", population: "35M"},
            {name: "Singapore", capital: "Singapore", continent: "Asia", flag: "üá∏üá¨", population: "5.9M"},
            {name: "South Korea", capital: "Seoul", continent: "Asia", flag: "üá∞üá∑", population: "52M"},
            {name: "Sri Lanka", capital: "Colombo", continent: "Asia", flag: "üá±üá∞", population: "22M"},
            {name: "Syria", capital: "Damascus", continent: "Asia", flag: "üá∏üáæ", population: "18M"},
            {name: "Tajikistan", capital: "Dushanbe", continent: "Asia", flag: "üáπüáØ", population: "9.5M"},
            {name: "Thailand", capital: "Bangkok", continent: "Asia", flag: "üáπüá≠", population: "70M"},
            {name: "Turkey", capital: "Ankara", continent: "Asia/Europe", flag: "üáπüá∑", population: "85M"},
            {name: "Turkmenistan", capital: "Ashgabat", continent: "Asia", flag: "üáπüá≤", population: "6M"},
            {name: "United Arab Emirates", capital: "Abu Dhabi", continent: "Asia", flag: "üá¶üá™", population: "10M"},
            {name: "Uzbekistan", capital: "Tashkent", continent: "Asia", flag: "üá∫üáø", population: "34M"},
            {name: "Vietnam", capital: "Hanoi", continent: "Asia", flag: "üáªüá≥", population: "98M"},
            {name: "Yemen", capital: "Sana'a", continent: "Asia", flag: "üáæüá™", population: "30M"},

            // Europe (44)
            {name: "Albania", capital: "Tirana", continent: "Europe", flag: "üá¶üá±", population: "2.9M"},
            {name: "Andorra", capital: "Andorra la Vella", continent: "Europe", flag: "üá¶üá©", population: "79K"},
            {name: "Austria", capital: "Vienna", continent: "Europe", flag: "üá¶üáπ", population: "9M"},
            {name: "Belarus", capital: "Minsk", continent: "Europe", flag: "üáßüáæ", population: "9.4M"},
            {name: "Belgium", capital: "Brussels", continent: "Europe", flag: "üáßüá™", population: "11.5M"},
            {name: "Bosnia and Herzegovina", capital: "Sarajevo", continent: "Europe", flag: "üáßüá¶", population: "3.3M"},
            {name: "Bulgaria", capital: "Sofia", continent: "Europe", flag: "üáßüá¨", population: "7M"},
            {name: "Croatia", capital: "Zagreb", continent: "Europe", flag: "üá≠üá∑", population: "3.9M"},
            {name: "Czech Republic", capital: "Prague", continent: "Europe", flag: "üá®üáø", population: "10.7M"},
            {name: "Denmark", capital: "Copenhagen", continent: "Europe", flag: "üá©üá∞", population: "5.8M"},
            {name: "Estonia", capital: "Tallinn", continent: "Europe", flag: "üá™üá™", population: "1.3M"},
            {name: "Finland", capital: "Helsinki", continent: "Europe", flag: "üá´üáÆ", population: "5.5M"},
            {name: "France", capital: "Paris", continent: "Europe", flag: "üá´üá∑", population: "68M"},
            {name: "Germany", capital: "Berlin", continent: "Europe", flag: "üá©üá™", population: "83M"},
            {name: "Greece", capital: "Athens", continent: "Europe", flag: "üá¨üá∑", population: "10.7M"},
            {name: "Hungary", capital: "Budapest", continent: "Europe", flag: "üá≠üá∫", population: "9.7M"},
            {name: "Iceland", capital: "Reykjavik", continent: "Europe", flag: "üáÆüá∏", population: "372K"},
            {name: "Ireland", capital: "Dublin", continent: "Europe", flag: "üáÆüá™", population: "5M"},
            {name: "Italy", capital: "Rome", continent: "Europe", flag: "üáÆüáπ", population: "59M"},
            {name: "Latvia", capital: "Riga", continent: "Europe", flag: "üá±üáª", population: "1.9M"},
            {name: "Liechtenstein", capital: "Vaduz", continent: "Europe", flag: "üá±üáÆ", population: "38K"},
            {name: "Lithuania", capital: "Vilnius", continent: "Europe", flag: "üá±üáπ", population: "2.8M"},
            {name: "Luxembourg", capital: "Luxembourg", continent: "Europe", flag: "üá±üá∫", population: "634K"},
            {name: "Malta", capital: "Valletta", continent: "Europe", flag: "üá≤üáπ", population: "518K"},
            {name: "Moldova", capital: "Chi»ôinƒÉu", continent: "Europe", flag: "üá≤üá©", population: "2.6M"},
            {name: "Monaco", capital: "Monaco", continent: "Europe", flag: "üá≤üá®", population: "39K"},
            {name: "Montenegro", capital: "Podgorica", continent: "Europe", flag: "üá≤üá™", population: "628K"},
            {name: "Netherlands", capital: "Amsterdam", continent: "Europe", flag: "üá≥üá±", population: "17M"},
            {name: "North Macedonia", capital: "Skopje", continent: "Europe", flag: "üá≤üá∞", population: "2.1M"},
            {name: "Norway", capital: "Oslo", continent: "Europe", flag: "üá≥üá¥", population: "5.4M"},
            {name: "Poland", capital: "Warsaw", continent: "Europe", flag: "üáµüá±", population: "38M"},
            {name: "Portugal", capital: "Lisbon", continent: "Europe", flag: "üáµüáπ", population: "10M"},
            {name: "Romania", capital: "Bucharest", continent: "Europe", flag: "üá∑üá¥", population: "19M"},
            {name: "San Marino", capital: "San Marino", continent: "Europe", flag: "üá∏üá≤", population: "34K"},
            {name: "Serbia", capital: "Belgrade", continent: "Europe", flag: "üá∑üá∏", population: "7M"},
            {name: "Slovakia", capital: "Bratislava", continent: "Europe", flag: "üá∏üá∞", population: "5.5M"},
            {name: "Slovenia", capital: "Ljubljana", continent: "Europe", flag: "üá∏üáÆ", population: "2.1M"},
            {name: "Spain", capital: "Madrid", continent: "Europe", flag: "üá™üá∏", population: "47M"},
            {name: "Sweden", capital: "Stockholm", continent: "Europe", flag: "üá∏üá™", population: "10M"},
            {name: "Switzerland", capital: "Bern", continent: "Europe", flag: "üá®üá≠", population: "8.7M"},
            {name: "Ukraine", capital: "Kyiv", continent: "Europe", flag: "üá∫üá¶", population: "41M"},
            {name: "United Kingdom", capital: "London", continent: "Europe", flag: "üá¨üáß", population: "67M"},
            {name: "Vatican City", capital: "Vatican City", continent: "Europe", flag: "üáªüá¶", population: "825"},

            // North America (23)
            {name: "Antigua and Barbuda", capital: "Saint John's", continent: "North America", flag: "üá¶üá¨", population: "98K"},
            {name: "Bahamas", capital: "Nassau", continent: "North America", flag: "üáßüá∏", population: "394K"},
            {name: "Barbados", capital: "Bridgetown", continent: "North America", flag: "üáßüáß", population: "288K"},
            {name: "Belize", capital: "Belmopan", continent: "North America", flag: "üáßüáø", population: "398K"},
            {name: "Canada", capital: "Ottawa", continent: "North America", flag: "üá®üá¶", population: "38M"},
            {name: "Costa Rica", capital: "San Jos√©", continent: "North America", flag: "üá®üá∑", population: "5.1M"},
            {name: "Cuba", capital: "Havana", continent: "North America", flag: "üá®üá∫", population: "11M"},
            {name: "Dominica", capital: "Roseau", continent: "North America", flag: "üá©üá≤", population: "72K"},
            {name: "Dominican Republic", capital: "Santo Domingo", continent: "North America", flag: "üá©üá¥", population: "11M"},
            {name: "El Salvador", capital: "San Salvador", continent: "North America", flag: "üá∏üáª", population: "6.5M"},
            {name: "Grenada", capital: "Saint George's", continent: "North America", flag: "üá¨üá©", population: "113K"},
            {name: "Guatemala", capital: "Guatemala City", continent: "North America", flag: "üá¨üáπ", population: "17M"},
            {name: "Haiti", capital: "Port-au-Prince", continent: "North America", flag: "üá≠üáπ", population: "11M"},
            {name: "Honduras", capital: "Tegucigalpa", continent: "North America", flag: "üá≠üá≥", population: "10M"},
            {name: "Jamaica", capital: "Kingston", continent: "North America", flag: "üáØüá≤", population: "2.9M"},
            {name: "Mexico", capital: "Mexico City", continent: "North America", flag: "üá≤üáΩ", population: "129M"},
            {name: "Nicaragua", capital: "Managua", continent: "North America", flag: "üá≥üáÆ", population: "6.6M"},
            {name: "Panama", capital: "Panama City", continent: "North America", flag: "üáµüá¶", population: "4.3M"},
            {name: "Saint Kitts and Nevis", capital: "Basseterre", continent: "North America", flag: "üá∞üá≥", population: "53K"},
            {name: "Saint Lucia", capital: "Castries", continent: "North America", flag: "üá±üá®", population: "184K"},
            {name: "Saint Vincent and the Grenadines", capital: "Kingstown", continent: "North America", flag: "üáªüá®", population: "111K"},
            {name: "Trinidad and Tobago", capital: "Port of Spain", continent: "North America", flag: "üáπüáπ", population: "1.4M"},
            {name: "United States", capital: "Washington, D.C.", continent: "North America", flag: "üá∫üá∏", population: "333M"},

            // Oceania (14)
            {name: "Australia", capital: "Canberra", continent: "Oceania", flag: "üá¶üá∫", population: "26M"},
            {name: "Fiji", capital: "Suva", continent: "Oceania", flag: "üá´üáØ", population: "898K"},
            {name: "Kiribati", capital: "Tarawa", continent: "Oceania", flag: "üá∞üáÆ", population: "121K"},
            {name: "Marshall Islands", capital: "Majuro", continent: "Oceania", flag: "üá≤üá≠", population: "59K"},
            {name: "Micronesia", capital: "Palikir", continent: "Oceania", flag: "üá´üá≤", population: "115K"},
            {name: "Nauru", capital: "Yaren", continent: "Oceania", flag: "üá≥üá∑", population: "11K"},
            {name: "New Zealand", capital: "Wellington", continent: "Oceania", flag: "üá≥üáø", population: "5.1M"},
            {name: "Palau", capital: "Ngerulmud", continent: "Oceania", flag: "üáµüáº", population: "18K"},
            {name: "Papua New Guinea", capital: "Port Moresby", continent: "Oceania", flag: "üáµüá¨", population: "9M"},
            {name: "Samoa", capital: "Apia", continent: "Oceania", flag: "üáºüá∏", population: "199K"},
            {name: "Solomon Islands", capital: "Honiara", continent: "Oceania", flag: "üá∏üáß", population: "687K"},
            {name: "Tonga", capital: "Nuku'alofa", continent: "Oceania", flag: "üáπüá¥", population: "106K"},
            {name: "Tuvalu", capital: "Funafuti", continent: "Oceania", flag: "üáπüáª", population: "12K"},
            {name: "Vanuatu", capital: "Port Vila", continent: "Oceania", flag: "üáªüá∫", population: "307K"},

            // South America (12)
            {name: "Argentina", capital: "Buenos Aires", continent: "South America", flag: "üá¶üá∑", population: "45M"},
            {name: "Bolivia", capital: "Sucre", continent: "South America", flag: "üáßüá¥", population: "12M"},
            {name: "Brazil", capital: "Bras√≠lia", continent: "South America", flag: "üáßüá∑", population: "215M"},
            {name: "Chile", capital: "Santiago", continent: "South America", flag: "üá®üá±", population: "19M"},
            {name: "Colombia", capital: "Bogot√°", continent: "South America", flag: "üá®üá¥", population: "51M"},
            {name: "Ecuador", capital: "Quito", continent: "South America", flag: "üá™üá®", population: "18M"},
            {name: "Guyana", capital: "Georgetown", continent: "South America", flag: "üá¨üáæ", population: "787K"},
            {name: "Paraguay", capital: "Asunci√≥n", continent: "South America", flag: "üáµüáæ", population: "7.1M"},
            {name: "Peru", capital: "Lima", continent: "South America", flag: "üáµüá™", population: "33M"},
            {name: "Suriname", capital: "Paramaribo", continent: "South America", flag: "üá∏üá∑", population: "587K"},
            {name: "Uruguay", capital: "Montevideo", continent: "South America", flag: "üá∫üáæ", population: "3.5M"},
            {name: "Venezuela", capital: "Caracas", continent: "South America", flag: "üáªüá™", population: "28M"}
        ];
        
        let globalProgress = { learnedCountries: [], currentQuiz: 1 };

        function loadProgress() {
            try {
                const saved = localStorage.getItem('flagQuizProgress');
                if (saved) {
                    globalProgress = JSON.parse(saved);
                }
            } catch (e) {}
        }
        function saveProgress() {
            try {
                localStorage.setItem('flagQuizProgress', JSON.stringify(globalProgress));
            } catch (e) {}
        }

        let currentQuestionIndex = 0, score = 0, currentCountry = null, selectedAnswer = null, quizMode = 'country', currentQuizCountries = [];

        document.addEventListener('DOMContentLoaded', function() {
            loadProgress();

            const elements = {
                flagEmoji: document.getElementById('flag-emoji'),
                countryInfo: document.getElementById('country-info'),
                countryName: document.getElementById('country-name'),
                capitalName: document.getElementById('capital-name'),
                continentName: document.getElementById('continent-name'),
                population: document.getElementById('population'),
                question: document.getElementById('question'),
                options: document.getElementById('options'),
                feedback: document.getElementById('feedback'),
                startBtn: document.getElementById('start-btn'),
                nextBtn: document.getElementById('next-btn'),
                nextQuizBtn: document.getElementById('next-quiz-btn'),
                resetBtn: document.getElementById('reset-btn'),
                currentScore: document.getElementById('current-score'),
                totalQuestions: document.getElementById('total-questions'),
                globalProgress: document.getElementById('global-progress'),
                quizNumber: document.getElementById('quiz-number'),
                globalProgressFill: document.getElementById('global-progress-fill'),
                completionBanner: document.getElementById('completion-banner')
            };

            // UI update helpers
            function updateProgress() {
                elements.globalProgress.innerText = `Countries Learned: ${globalProgress.learnedCountries.length} / 195`;
                let percent = globalProgress.learnedCountries.length / 195 * 100;
                elements.globalProgressFill.style.width = percent + "%";
                if (globalProgress.learnedCountries.length === 195) {
                    elements.completionBanner.classList.add('show');
                } else {
                    elements.completionBanner.classList.remove('show');
                }
            }
            function updateQuizNumber() {
                elements.quizNumber.innerText = `Quiz #${globalProgress.currentQuiz}`;
            }

            function showCountryInfo(country) {
                elements.countryInfo.classList.add('show');
                elements.countryName.innerText = country.name;
                elements.capitalName.innerText = country.capital;
                elements.continentName.innerText = country.continent;
                elements.population.innerText = country.population;
            }

            function hideCountryInfo() {
                elements.countryInfo.classList.remove('show');
            }

            function resetQuizState() {
                currentQuestionIndex = 0;
                score = 0;
                selectedAnswer = null;
                elements.currentScore.innerText = score;
                elements.totalQuestions.innerText = "10";
                elements.feedback.style.display = "none";
                hideCountryInfo();
            }

            function getRandomCountries(exclude = [], count = 10) {
                let pool = allCountries.filter(c => !exclude.includes(c.name));
                let arr = [];
                while (arr.length < count && pool.length > 0) {
                    let idx = Math.floor(Math.random() * pool.length);
                    arr.push(pool[idx]);
                    pool.splice(idx, 1);
                }
                return arr;
            }

            function generateOptions(correctCountry) {
                let options = [correctCountry];
                let incorrect = allCountries.filter(c => c.name !== correctCountry.name);
                while (options.length < 4) {
                    let idx = Math.floor(Math.random() * incorrect.length);
                    options.push(incorrect[idx]);
                    incorrect.splice(idx, 1);
                }
                // Shuffle
                for (let i = options.length - 1; i > 0; i--) {
                    let j = Math.floor(Math.random() * (i + 1));
                    [options[i], options[j]] = [options[j], options[i]];
                }
                return options;
            }

            function renderQuestion() {
                let country = currentQuizCountries[currentQuestionIndex];
                currentCountry = country;
                elements.flagEmoji.innerText = country.flag;
                let questionText = "";
                let optionsList = [];
                if (quizMode === 'country') {
                    questionText = `Which country does this flag belong to?`;
                    optionsList = generateOptions(country).map(c => c.name);
                } else if (quizMode === 'capital') {
                    questionText = `Which is the capital city of ${country.name}?`;
                    optionsList = generateOptions(country).map(c => c.capital);
                } else if (quizMode === 'continent') {
                    questionText = `Which continent is ${country.name} in?`;
                    optionsList = generateOptions(country).map(c => c.continent);
                }
                elements.question.innerText = questionText;
                elements.options.style.display = "grid";
                Array.from(elements.options.children).forEach((opt, i) => {
                    opt.innerText = optionsList[i] || "";
                    opt.className = "option";
                });
                selectedAnswer = null;
                elements.nextBtn.style.display = "none";
                elements.feedback.style.display = "none";
            }

            function handleAnswer(optionIdx) {
                if (selectedAnswer !== null) return; // already answered
                selectedAnswer = optionIdx;
                let optElems = Array.from(elements.options.children);
                let correctIdx = 0;
                let correctText = "";
                if (quizMode === 'country') {
                    correctText = currentCountry.name;
                } else if (quizMode === 'capital') {
                    correctText = currentCountry.capital;
                } else if (quizMode === 'continent') {
                    correctText = currentCountry.continent;
                }
                optElems.forEach((opt, i) => {
                    if (opt.innerText === correctText) correctIdx = i;
                });
                optElems.forEach((opt, i) => {
                    opt.classList.remove('selected');
                    if (i === correctIdx) opt.classList.add('correct');
                    else if (i === optionIdx) opt.classList.add('incorrect');
                });
                let correct = optionIdx === correctIdx;
                if (correct) {
                    elements.feedback.innerText = "Correct!";
                    elements.feedback.className = "feedback correct";
                    score++;
                    elements.currentScore.innerText = score;
                    if (!globalProgress.learnedCountries.includes(currentCountry.name)) {
                        globalProgress.learnedCountries.push(currentCountry.name);
                        saveProgress();
                        updateProgress();
                    }
                } else {
                    elements.feedback.innerText = "Incorrect!";
                    elements.feedback.className = "feedback incorrect";
                }
                elements.feedback.style.display = "flex";
                showCountryInfo(currentCountry);
                elements.nextBtn.style.display = "inline-block";
            }

            function nextQuestion() {
                hideCountryInfo();
                elements.feedback.style.display = "none";
                selectedAnswer = null;
                currentQuestionIndex++;
                if (currentQuestionIndex < currentQuizCountries.length) {
                    renderQuestion();
                } else {
                    elements.options.style.display = "none";
                    elements.flagEmoji.innerText = "üéâ";
                    elements.question.innerText = `Quiz Complete! Your score: ${score} / ${currentQuizCountries.length}`;
                    elements.nextQuizBtn.style.display = "inline-block";
                    elements.resetBtn.style.display = "inline-block";
                }
            }

            function startQuiz() {
                resetQuizState();
                updateQuizNumber();
                // Exclude learned countries for next quiz
                let exclude = globalProgress.learnedCountries || [];
                currentQuizCountries = getRandomCountries(exclude, 10);
                if (currentQuizCountries.length === 0) {
                    elements.question.innerText = "You've learned all countries!";
                    elements.flagEmoji.innerText = "üéâ";
                    elements.options.style.display = "none";
                    elements.nextQuizBtn.style.display = "none";
                    return;
                }
                renderQuestion();
                elements.startBtn.style.display = "none";
                elements.nextBtn.style.display = "none";
                elements.nextQuizBtn.style.display = "none";
                elements.resetBtn.style.display = "inline-block";
            }

            function startNextQuiz() {
                globalProgress.currentQuiz++;
                saveProgress();
                startQuiz();
            }

            function resetProgress() {
                globalProgress.learnedCountries = [];
                globalProgress.currentQuiz = 1;
                saveProgress();
                updateProgress();
                startQuiz();
            }

            // Mode buttons
            Array.from(document.querySelectorAll('.mode-btn')).forEach(btn => {
                btn.addEventListener('click', function() {
                    Array.from(document.querySelectorAll('.mode-btn')).forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    quizMode = btn.dataset.mode;
                    startQuiz();
                });
            });

            // Option buttons
            Array.from(elements.options.children).forEach((opt, idx) => {
                opt.addEventListener('click', () => {
                    handleAnswer(idx);
                });
            });

            elements.startBtn.addEventListener('click', startQuiz);
            elements.nextBtn.addEventListener('click', nextQuestion);
            elements.nextQuizBtn.addEventListener('click', startNextQuiz);
            elements.resetBtn.addEventListener('click', resetProgress);

            // Initial UI
            updateProgress();
            updateQuizNumber();
            elements.startBtn.style.display = "inline-block";
            elements.nextBtn.style.display = "none";
            elements.nextQuizBtn.style.display = "none";
            elements.resetBtn.style.display = globalProgress.learnedCountries.length ? "inline-block" : "none";
        });
    </script>
</body>
</html>
